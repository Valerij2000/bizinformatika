!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const t=["img/a3.webp","img/a4.webp","img/b1.webp","img/b2.webp","img/b3.webp","img/b4.webp","img/final-earth.png","img/player_1.png","img/player_2.png"];function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var i,r,s,o,a,c=(i=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],r=function(){function t(n){var i=n.targetModal,r=n.triggers,s=void 0===r?[]:r,o=n.onShow,a=void 0===o?function(){}:o,c=n.onClose,l=void 0===c?function(){}:c,u=n.openTrigger,h=void 0===u?"data-micromodal-trigger":u,d=n.closeTrigger,f=void 0===d?"data-micromodal-close":d,p=n.openClass,g=void 0===p?"is-open":p,m=n.disableScroll,y=void 0!==m&&m,v=n.disableFocus,w=void 0!==v&&v,b=n.awaitCloseAnimation,E=void 0!==b&&b,_=n.awaitOpenAnimation,T=void 0!==_&&_,S=n.debugMode,I=void 0!==S&&S;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modal=document.getElementById(i),this.config={debugMode:I,disableScroll:y,openTrigger:h,closeTrigger:f,openClass:g,onShow:a,onClose:l,awaitCloseAnimation:E,awaitOpenAnimation:T,disableFocus:w},s.length>0&&this.registerTriggers.apply(this,e(s)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var n;return(n=[{key:"registerTriggers",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.filter(Boolean).forEach((function(e){e.addEventListener("click",(function(e){return t.showModal(e)}))}))}},{key:"showModal",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",(function e(){t.modal.removeEventListener("animationend",e,!1),t.setFocusToFirstNode()}),!1):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,e)}},{key:"closeModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,t),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",(function t(){e.classList.remove(n),e.removeEventListener("animationend",t,!1)}),!1)}else e.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(t){this.modal=document.getElementById(t),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(t){if(this.config.disableScroll){var e=document.querySelector("body");switch(t){case"enable":Object.assign(e.style,{overflow:""});break;case"disable":Object.assign(e.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(t){(t.target.hasAttribute(this.config.closeTrigger)||t.target.parentNode.hasAttribute(this.config.closeTrigger))&&(t.preventDefault(),t.stopPropagation(),this.closeModal(t))}},{key:"onKeydown",value:function(t){27===t.keyCode&&this.closeModal(t),9===t.keyCode&&this.retainFocus(t)}},{key:"getFocusableNodes",value:function(){var t=this.modal.querySelectorAll(i);return Array.apply(void 0,e(t))}},{key:"setFocusToFirstNode",value:function(){var t=this;if(!this.config.disableFocus){var e=this.getFocusableNodes();if(0!==e.length){var n=e.filter((function(e){return!e.hasAttribute(t.config.closeTrigger)}));n.length>0&&n[0].focus(),0===n.length&&e[0].focus()}}}},{key:"retainFocus",value:function(t){var e=this.getFocusableNodes();if(0!==e.length)if(e=e.filter((function(t){return null!==t.offsetParent})),this.modal.contains(document.activeElement)){var n=e.indexOf(document.activeElement);t.shiftKey&&0===n&&(e[e.length-1].focus(),t.preventDefault()),!t.shiftKey&&e.length>0&&n===e.length-1&&(e[0].focus(),t.preventDefault())}else e[0].focus()}}])&&function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(t.prototype,n),t}(),s=null,o=function(t){if(!document.getElementById(t))return console.warn("MicroModal: ‚ùóSeems like you have missed %c'".concat(t,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(t,'"></div>')),!1},a=function(t,e){if(t.length<=0&&(console.warn("MicroModal: ‚ùóPlease specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>')),!e)return!0;for(var n in e)o(n);return!0},{init:function(t){var n,i,o,c=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),l=e(document.querySelectorAll("[".concat(c.openTrigger,"]"))),u=(n=l,i=c.openTrigger,o=[],n.forEach((function(t){var e=t.attributes[i].value;void 0===o[e]&&(o[e]=[]),o[e].push(t)})),o);if(!0!==c.debugMode||!1!==a(l,u))for(var h in u){var d=u[h];c.targetModal=h,c.triggers=e(d),s=new r(c)}},show:function(t,e){var n=e||{};n.targetModal=t,!0===n.debugMode&&!1===o(t)||(s&&s.removeEventListeners(),(s=new r(n)).showModal())},close:function(t){t?s.closeModalById(t):s.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=c);const l=[[{title:"–ö–æ–≥–¥–∞ –≤—Å—ë –∏–¥—ë—Ç –Ω–µ –ø–æ –ø–ª–∞–Ω—É...",correctclass:"smaller-header",description:"–í–û–ü–†–û–° &#8470;&nbsp;1",imgurl:"./img/b1.webp",question:"\n      <p>\n        –ö–∞–∫ —Ç—ã —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É?\n      </p>\n      ",answers:['<p class="answer__text">\n          –ü–∞–Ω–∏–∫–∞! –ì–¥–µ –º–æ—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è? üò±\n        </p>','<p class="answer__text">\n          –û–∫–µ–π, –ø–æ–ø—Ä–æ–±—É–µ–º –ø–∞—Ä—É —Ä–µ—à–µ–Ω–∏–π –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç! üõ†Ô∏è\n        </p>','<p class="answer__text">\n          –≠—Ç–æ –≤—ã–∑–æ–≤! –ù–∞–¥–æ –ø—Ä–∏–¥—É–º–∞—Ç—å —á—Ç–æ-—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–æ–≤–æ–µ. üöÄ\n        </p>','<p class="answer__text">\n          –ü–æ–∑–æ–≤—É –∫–æ–º–∞–Ω–¥—É ‚Äì –≤–º–µ—Å—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º—Å—è! ü§ù\n        </p>'],correct:0,popup:{correct:'\n          <p class="modal__text">\n            üòÖ –ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π, –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –Ω–∞–≤—ã–∫, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Ä–∞–∑–≤–∏—Ç—å! –í–∞–∂–Ω–æ –Ω–µ –±–æ—è—Ç—å—Å—è –ø—Ä–æ–±–ª–µ–º, –∞ –∏—Å–∫–∞—Ç—å –≤ –Ω–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏. –ù–∞—á–Ω–∏ —Å –º–∞–ª–æ–≥–æ ‚Äì –ø—Ä–æ–±—É–π —Ä–µ—à–∞—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–æ–∫–∞—á–∏–≤–∞—Ç—å –≥–∏–±–∫–æ—Å—Ç—å –º—ã—à–ª–µ–Ω–∏—è!\n          </p>\n          \n        ',incorrect:'\n        <p class="modal__text">\n        üî• –¢—ã –ø—Ä–∏—Ä–æ–∂–¥–µ–Ω–Ω—ã–π –Ω–æ–≤–∞—Ç–æ—Ä! –í–º–µ—Å—Ç–æ –ø–∞–Ω–∏–∫–∏ —Ç—ã –≤–∏–¥–∏—à—å –≤—ã–∑–æ–≤ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–¥—É–º–∞—Ç—å —á—Ç–æ-—Ç–æ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ. –ò–º–µ–Ω–Ω–æ —Ç–∞–∫–∏–µ –ª—é–¥–∏ –¥–≤–∏–≥–∞—é—Ç –º–∏—Ä –≤–ø–µ—Ä–µ–¥ –∏ —Å–æ–∑–¥–∞—é—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –±—É–¥—É—â–µ–≥–æ!          \n        </p>\n        \n        '}},{title:"–ù–∞–∑–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏–∑–º–µ–Ω–∏—Ç –º–∏—Ä",correctclass:"que4 smaller-header",description:"–í–û–ü–†–û–° &#8470;&nbsp;2",imgurl:"./img/b2.webp",question:"\n      <p>\n        –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –∏–∑–æ–±—Ä—ë–ª –Ω–æ–≤—ã–π –≥–∞–¥–∂–µ—Ç. –ö–∞–∫ –µ–≥–æ –Ω–∞–∑–æ–≤—ë—à—å?\n      </p>\n      ",answers:['<p class="answer__text">\n          "–°—É–ø–µ—Ä-–ü—É–ø–µ—Ä 3000" ‚Äì –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã –∑–≤—É—á–∞–ª–æ –∫—Ä—É—Ç–æ! üí•\n        </p>','<p class="answer__text">\n          –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ª–æ–≥–∏—á–Ω—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, "–£–º–Ω—ã–π –ë—Ä–∞—Å–ª–µ—Ç v2". üì≤\n        </p>','<p class="answer__text">\n          –ü—Ä–∏–¥—É–º–∞—é –Ω–µ—á—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ, —á—Ç–æ–±—ã —ç—Ç–æ —Å—Ç–∞–ª–æ –±—Ä–µ–Ω–¥–æ–º –±—É–¥—É—â–µ–≥–æ! üî•\n        </p>','<p class="answer__text">\n          –ü—Ä–æ–≤–µ–¥—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞ –∏ –≤—ã–±–µ—Ä—É –ª—É—á—à–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ —Ç—Ä–µ–Ω–¥–∞–º. üìä\n        </p>'],correct:0,popup:{correct:'\n          <p class="modal__text">\n            üòÇ –ù—É, —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é —É —Ç–µ–±—è —Ç–æ—á–Ω–æ –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ! –ù–æ —á—Ç–æ–±—ã –∏–¥–µ—è –∑–∞–∏–≥—Ä–∞–ª–∞, –Ω—É–∂–Ω–æ –µ—â–µ –ø–æ–Ω–∏–º–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã –∏ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é. –í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –Ω–µ–º–Ω–æ–≥–æ —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –±—Ä–µ–Ω–¥–∏–Ω–≥–∞?\n          </p>\n        ',incorrect:'\n        <p class="modal__text modal__text--w57">\n          üí° –¢—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—à—å, —á—Ç–æ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏ ‚Äì —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –∏–¥–µ—è, –Ω–æ –∏ –µ—ë –ø–æ–¥–∞—á–∞! –ö—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ —É–º–µ–Ω–∏–µ –≤—ã–¥–µ–ª–∏—Ç—å—Å—è ‚Äì –≤–∞–∂–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è –∏–Ω–Ω–æ–≤–∞—Ç–æ—Ä–∞. –í–æ–∑–º–æ–∂–Ω–æ, —Ç–≤–æ–µ –∏–º—è —Å–∫–æ—Ä–æ —Å—Ç–∞–Ω–µ—Ç –ª–µ–≥–µ–Ω–¥–æ–π –≤ –º–∏—Ä–µ —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤!\n        </p>\n        '}},{title:"–õ—é–±–∏—à—å –ª–∏ —Ç—ã –∏–≥—Ä–∞—Ç—å —Å —Ä–∏—Å–∫–æ–º?",correctclass:"que4",description:"–í–û–ü–†–û–° &#8470;&nbsp;3",imgurl:"./img/a3.webp",question:"\n      <p>\n       –ö–∞–∫ —Ç—ã –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ —Ä–∏—Å–∫—É?\n      </p>     \n      ",answers:['<p class="answer__text">\n          –õ—É—á—à–µ –±–µ–∑ –Ω–µ–≥–æ ‚Äì —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ. üîµ\n        </p>','<p class="answer__text">\n          –ï—Å–ª–∏ —Ä–∏—Å–∫ –æ–ø—Ä–∞–≤–¥–∞–Ω ‚Äì –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç? üü°\n        </p>','<p class="answer__text">\n          –†–∏—Å–∫ ‚Äì –¥–≤–∏–≥–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞! –ù—É–∂–Ω–æ –ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–æ–≤–æ–µ. üî¥\n        </p>','<p class="answer__text">\n          –ì–ª–∞–≤–Ω–æ–µ ‚Äì –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å–∫–∏ –∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä–∏. ‚öñÔ∏è\n        </p>'],correct:0,popup:{correct:'\n        <p class="modal__text">\n          üòå –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å ‚Äì —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ –≤ –∏–Ω–Ω–æ–≤–∞—Ü–∏—è—Ö –æ–Ω–∞ —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è. –ü–æ–ø—Ä–æ–±—É–π –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ –∑–æ–Ω—ã –∫–æ–º—Ñ–æ—Ä—Ç–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∏–¥–µ–∏ ‚Äì –∏–Ω–æ–≥–¥–∞ –∏–º–µ–Ω–Ω–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–º –æ—Ç–∫—Ä—ã—Ç–∏—è–º!\n        </p>\n        ',incorrect:'\n        <p class="modal__text modal__text--w57">\n          üöÄ –¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –ø–µ—Ä–≤–æ–ø—Ä–æ—Ö–æ–¥–µ—Ü! –í–µ–ª–∏–∫–∏–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏ —Ä–æ–∂–¥–∞—é—Ç—Å—è —Ç–∞–º, –≥–¥–µ –¥—Ä—É–≥–∏–µ –±–æ—è—Ç—Å—è —Ä–∏—Å–∫–æ–≤–∞—Ç—å. –ì–ª–∞–≤–Ω–æ–µ ‚Äì –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É —Å–º–µ–ª–æ—Å—Ç—å—é –∏ —Ä–∞—Å—á–µ—Ç–æ–º, –∏ —Ç–æ–≥–¥–∞ —É—Å–ø–µ—Ö –Ω–µ–∏–∑–±–µ–∂–µ–Ω!\n        </p>\n        \n        '}},{title:"–ï—Å–ª–∏ –±—ã —É —Ç–µ–±—è –±—ã–ª 1 –º–∏–ª–ª–∏–∞—Ä–¥ –Ω–∞ —Å—Ç–∞—Ä—Ç–∞–ø‚Ä¶",correctclass:"smaller-header",description:"–í–û–ü–†–û–° &#8470;&nbsp;4",imgurl:"./img/a4.webp",question:"\n      <p>\n       –¢–µ–±–µ –¥–∞—é—Ç –º–∏–ª–ª–∏–∞—Ä–¥ –¥–æ–ª–ª–∞—Ä–æ–≤ –Ω–∞ —Å—Ç–∞—Ä—Ç–∞–ø. –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å?\n      </p>\n      ",answers:['<p class="answer__text">\n          –ö—É–ø–ª—é –æ—Å—Ç—Ä–æ–≤ –∏ –æ—Ç–¥–æ—Ö–Ω—É! üèùÔ∏è\n        </p>','<p class="answer__text">\n          –í–ª–æ–∂—É –≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∑–∞—Ä–∞–±–æ—Ç–∞—é –µ—â—ë –±–æ–ª—å—à–µ. üìà\n        </p>','<p class="answer__text">\n          –ü—Ä–∏–¥—É–º–∞—é –ø—Ä–æ—Ä—ã–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–º–µ–Ω–∏—Ç –º–∏—Ä! üåç\n        </p>','<p class="answer__text">\n          –°–æ–±–µ—Ä—É –∫–æ–º–∞–Ω–¥—É —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ä–∞–∑–≤–∏—Ç–∏—è. üèÜ\n        </p>'],correct:0,popup:{correct:'\n        <p class="modal__text">\n          üèùÔ∏è –û—Ç–¥—ã—Ö ‚Äì —ç—Ç–æ, –∫–æ–Ω–µ—á–Ω–æ, –≤–∞–∂–Ω–æ... –Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—å, –µ—Å–ª–∏ –±—ã –ò–ª–æ–Ω –ú–∞—Å–∫ –∏–ª–∏ –°—Ç–∏–≤ –î–∂–æ–±—Å –≤—ã–±—Ä–∞–ª–∏ —Ç–∞–∫–æ–π –ø—É—Ç—å? –í–æ–∑–º–æ–∂–Ω–æ, —Ç–≤–æ—è –∏–¥–µ—è —Å–ø–æ—Å–æ–±–Ω–∞ —Å–¥–µ–ª–∞—Ç—å –º–∏—Ä –ª—É—á—à–µ ‚Äì –ø–æ—á–µ–º—É –±—ã –Ω–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å? üòâ\n        </p> \n        \n        ',incorrect:'\n        <p class="modal__text modal__text--w57">\n          üåç –ú–∏—Ä –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Ç–∞–∫–∏—Ö –ª—é–¥—è—Ö, –∫–∞–∫ —Ç—ã! –£ —Ç–µ–±—è –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ –∏ –∞–º–±–∏—Ü–∏–∏, –∞ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –¥–≤–∏–≥–∞–µ—Ç —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ –≤–ø–µ—Ä–µ–¥. –û—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞–π—Ç–∏ –∫–æ–º–∞–Ω–¥—É –∏ –Ω–∞—á–∞—Ç—å –≤–æ–ø–ª–æ—â–∞—Ç—å –∏–¥–µ–∏!\n        </p>\n        '}}],[{title:"–ü–∞–Ω–∏–∫–∞ –∏–ª–∏ –ø–ª–∞–Ω?",correctclass:"que4",description:"–í–û–ü–†–û–° &#8470;&nbsp;1",imgurl:"./img/b1.webp",question:"\n      <p>\n        –ß—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å, –µ—Å–ª–∏ –Ω–∞ —Ä–∞–±–æ—Ç–µ –≤–Ω–µ–∑–∞–ø–Ω–æ —Å–ª–æ–º–∞–ª–∞—Å—å –≤—Å—è —Å–∏—Å—Ç–µ–º–∞?\n      </p>\n      ",answers:['<p class="answer__text">\n          –ü–æ–∑–≤–æ–Ω—é –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø–æ–¥–æ–∂–¥—É —Ä–µ—à–µ–Ω–∏—è. ‚òéÔ∏è\n        </p>','<p class="answer__text">\n          –ù–∞—á–Ω—É —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è —Å–∞–º ‚Äì –≤–¥—Ä—É–≥ –Ω–∞–π–¥—É –ø—Ä–∏—á–∏–Ω—É? üõ†Ô∏è\n        </p>','<p class="answer__text">\n          –ò—Å–ø–æ–ª—å–∑—É—é —ç—Ç—É —Å–∏—Ç—É–∞—Ü–∏—é, —á—Ç–æ–±—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–æ–≤—É—é, –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É! üí°\n        </p>','<p class="answer__text">\n          –ü–æ–¥–∫–ª—é—á—É –≤—Å–µ—Ö, –∫—Ç–æ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å, –∏ –æ—Ä–≥–∞–Ω–∏–∑—É—é –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ—à–µ–Ω–∏—è. ü§ù\n        </p>'],correct:0,popup:{correct:'\n        <p class="modal__text">\n          üòÖ –ù—É, –∂–¥–∞—Ç—å ‚Äì —Ç–æ–∂–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è... –Ω–æ –Ω–µ —Å–∞–º–∞—è –ª—É—á—à–∞—è! –í –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–µ –≤–∞–∂–Ω—ã –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –ü–æ–ø—Ä–æ–±—É–π –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –ø–æ–∏—Å–∫–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ —Å–∞–º ‚Äì –≤–¥—Ä—É–≥ –∏–º–µ–Ω–Ω–æ —Ç—ã –Ω–∞–π–¥–µ—à—å —Å–ø–æ—Å–æ–± —É–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É?\n        </p>\n          \n        ',incorrect:'\n        <p class="modal__text">\n          üöÄ –í–æ—Ç —ç—Ç–æ –ø–æ–¥—Ö–æ–¥! –¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–µ—à–∞–µ—à—å –ø—Ä–æ–±–ª–µ–º—É, –∞ –∏—â–µ—à—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è. –ò–º–µ–Ω–Ω–æ —Ç–∞–∫ –¥—É–º–∞—é—Ç –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏ ‚Äî –Ω–µ —Ç—É—à–∞—Ç –ø–æ–∂–∞—Ä—ã, –∞ –¥–µ–ª–∞—é—Ç —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–ª–∏!\n        </p>\n        \n        '}},{title:"–û–±—ä—è—Å–Ω–∏ –±–∞–±—É—à–∫–µ, —á–µ–º —Ç—ã –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è",correctclass:"que4 smaller-header",description:"–í–û–ü–†–û–° &#8470;&nbsp;2",imgurl:"./img/b2.webp",question:'\n      <p>\n        –ö–∞–∫ –±—ã —Ç—ã –æ–ø–∏—Å–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å "–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞" –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏?\n      </p>\n      ',answers:['<p class="answer__text">\n          "–ù—É... —Ç–∞–º –∏ –±–∏–∑–Ω–µ—Å, –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã... —Å–ª–æ–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å!" ü§∑‚Äç‚ôÇÔ∏è\n        </p>','<p class="answer__text">\n          "–≠—Ç–æ —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –∫–æ–º–ø–∞–Ω–∏—è–º –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π." üíªüí∞\n        </p>','<p class="answer__text">\n          "–Ø —Å–æ–∑–¥–∞—é —Ü–∏—Ñ—Ä–æ–≤–æ–µ –±—É–¥—É—â–µ–µ! –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –∑–∞–∫–∞–∑—ã–≤–∞–µ—à—å –µ–¥—É –≤ –æ–¥–∏–Ω –∫–ª–∏–∫ ‚Äì —ç—Ç–æ –º–æ—è —Ä–∞–±–æ—Ç–∞!" üöÄ\n        </p>','<p class="answer__text">\n          "–Ø –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã —Å –ø–æ–º–æ—â—å—é –ò–¢, —á—Ç–æ–±—ã –∫–æ–º–ø–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–ª–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ." üìà\n        </p>'],correct:0,popup:{correct:'\n          <p class="modal__text">\n            üòÇ –°–ª–æ–∂–Ω–æ? –ú–æ–∂–µ—Ç –±—ã—Ç—å! –ù–æ —É–º–µ–Ω–∏–µ –æ–±—ä—è—Å–Ω—è—Ç—å ‚Äì –≤–∞–∂–Ω—ã–π –Ω–∞–≤—ã–∫ –¥–ª—è –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞. –í–µ–¥—å –µ—Å–ª–∏ —Ç—ã –Ω–µ –º–æ–∂–µ—à—å –æ–±—ä—è—Å–Ω–∏—Ç—å, —á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è, –∫–∞–∫ –∂–µ —Ç—ã –ø—Ä–æ–¥–∞—à—å —Å–≤–æ—é –∏–¥–µ—é? –ü–æ–ø—Ä–æ–±—É–π –ø–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è, –∏ —Ç–µ–±–µ —Ç–æ—á–Ω–æ —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ—â–µ!\n          </p>\n        ',incorrect:'\n        <p class="modal__text modal__text--w57">\n          üí° –¢—ã —É–º–µ–µ—à—å –ø—Ä–æ—Å—Ç–æ –æ–±—ä—è—Å–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏ ‚Äì —Ä–µ–¥–∫–∏–π —Ç–∞–ª–∞–Ω—Ç! –ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏ –∏–º–µ–Ω–Ω–æ —ç—Ç–∏–º –∏ –∑–∞–Ω–∏–º–∞—é—Ç—Å—è ‚Äì –¥–µ–ª–∞—é—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —É–¥–æ–±–Ω—ã–º–∏ –¥–ª—è –ª—é–¥–µ–π –∏ –ø–æ–º–æ–≥–∞—é—Ç –∫–æ–º–ø–∞–Ω–∏—è–º –∏–¥—Ç–∏ –≤ –Ω–æ–≥—É —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º!\n        </p>\n          '}},{title:"–ö–∞–∫ —Ç—ã –ø—Ä–∏–Ω–∏–º–∞–µ—à—å —Ä–µ—à–µ–Ω–∏—è?",correctclass:"",description:"–í–û–ü–†–û–° &#8470;&nbsp;3",imgurl:"./img/b3.webp",question:"\n      <p>\n       –ö–∞–∫–æ–π —É —Ç–µ–±—è —Å—Ç–∏–ª—å –º—ã—à–ª–µ–Ω–∏—è?\n      </p>\n      ",answers:['<p class="answer__text">\n          –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ ‚Äì –µ—Å–ª–∏ —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∑–Ω–∞—á–∏—Ç, —Ç–∞–∫ –∏ –µ—Å—Ç—å! ‚ú®\n        </p>','<p class="answer__text">\n          –°–æ–±–∏—Ä–∞—é –º–∞–∫—Å–∏–º—É–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é. üìä\n        </p>','<p class="answer__text">\n          –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É—é –∏ –≤—ã–±–∏—Ä–∞—é –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç! üîÑ\n        </p>','<p class="answer__text">\n          –ü—Ä–æ–≤–æ–∂—É SWOT-–∞–Ω–∞–ª–∏–∑, —Å—á–∏—Ç–∞—é —Ä–∏—Å–∫–∏ –∏ —Å—Ç—Ä–æ—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é. üìâüìà\n        </p>'],correct:0,popup:{correct:'\n        <p class="modal__text">\n          ü§î –ò–Ω—Ç—É–∏—Ü–∏—è ‚Äì —ç—Ç–æ –∑–¥–æ—Ä–æ–≤–æ, –Ω–æ –≤ –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–µ –Ω—É–∂–Ω—ã —Ñ–∞–∫—Ç—ã! –ü–æ–ø—Ä–æ–±—É–π –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫ —Å–≤–æ–∏–º —Ä–µ—à–µ–Ω–∏—è–º ‚Äì —Ç–æ–≥–¥–∞ —Ç–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è —Å—Ç–∞–Ω–µ—Ç –µ—â–µ —Å–∏–ª—å–Ω–µ–µ!\n        </p>\n        \n        ',incorrect:'\n        <p class="modal__text">\n          üìä –í–æ—Ç —ç—Ç–æ —É—Ä–æ–≤–µ–Ω—å! –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ ‚Äì –æ—Å–Ω–æ–≤–∞ –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏. –ï—Å–ª–∏ —Ç—ã —É–º–µ–µ—à—å –ø—Ä–æ–¥—É–º—ã–≤–∞—Ç—å –≤—Å—ë –Ω–∞–ø–µ—Ä—ë–¥, –∑–Ω–∞—á–∏—Ç, —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –æ–¥–∏–Ω –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞!\n        </p>\n        \n        '}},{title:"–ß–µ–≥–æ —Ç—ã –∂–¥—ë—à—å –æ—Ç —Ä–∞–±–æ—Ç—ã?",correctclass:"smaller-header que1",description:"–í–û–ü–†–û–° &#8470;&nbsp;4",imgurl:"./img/b4.webp",question:"\n      <p>\n        –ß—Ç–æ –¥–ª—è —Ç–µ–±—è –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏?\n      </p>\n      ",answers:['<p class="answer__text">\n          –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏. üîµ\n        </p>','<p class="answer__text">\n          –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É—á–∏—Ç—å—Å—è –Ω–æ–≤–æ–º—É. üìö\n        </p>','<p class="answer__text">\n          –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. üöÄ\n        </p class="answer__text">','<p class="answer__text">\n          –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ –∫–æ–º–∞–Ω–¥–∞–º–∏. üèÜ\n        </p>'],correct:0,popup:{correct:'\n        <p class="modal__text">\n          üòä –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å ‚Äì —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ –≤ –º–∏—Ä–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤—Å—ë –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è! –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å —Å—Ç–∞—Ç—å –∫—Ä—É—Ç—ã–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º, –ø–æ–ø—Ä–æ–±—É–π –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ —Ä–∞–º–∫–∏ –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ ‚Äì –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ –ª—é–±–∏—Ç —Ç–µ—Ö, –∫—Ç–æ –≥–æ—Ç–æ–≤ —É—á–∏—Ç—å—Å—è –∏ –º–µ–Ω—è—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å –º–∏—Ä–æ–º!\n        </p>\n        ',incorrect:'\n        <p class="modal__text modal__text--w50">\n          üî• –¢—ã ‚Äì –¥–≤–∏–≥–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞! –ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ ‚Äì —ç—Ç–æ –ø—Ä–æ –≤–ª–∏—è–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ. –ï—Å–ª–∏ —Ç–µ–±–µ –≤–∞–∂–Ω–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–∞–±–æ—Ç–∞—Ç—å, –∞ –º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã, —Ç–æ —Ç—ã –≤—ã–±—Ä–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ!\n        </p>\n        '}}]];const u=document.querySelector(".main");function h(t,e){u.classList.remove(t),u.classList.add(e)}const d=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,c=a?t[r+2]:0,l=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(d(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new p;const c=e<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class p extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g=function(t){return function(t){const e=d(t);return f.encodeByteArray(e,!0)}(t).replace(/\./g,"")},m=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t={}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&function(t){try{return f.decodeString(t,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},y=()=>{var t;return null===(t=m())||void 0===t?void 0:t.config};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function w(){try{return"object"==typeof indexedDB}catch(t){return!1}}function b(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}class E extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(T,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new E(i,o,n)}}const T=/\{\$([^}]+)}/g;function S(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(I(n)&&I(s)){if(!S(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function I(t){return null!==t&&"object"==typeof t}function C(t,e=1e3,n=2){const i=e*Math.pow(n,t),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function A(t){return t&&t._delegate?t._delegate:t}class D{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const k="[DEFAULT]";class N{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new v;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:k})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=k){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=k){return this.instances.has(t)}getOptions(t=k){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(r)&&s.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===k?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(r){}var i;return n||null}normalizeInstanceIdentifier(t=k){return this.component?this.component.multipleInstances?t:k:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class x{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new N(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var L,M;(M=L||(L={}))[M.DEBUG=0]="DEBUG",M[M.VERBOSE=1]="VERBOSE",M[M.INFO=2]="INFO",M[M.WARN=3]="WARN",M[M.ERROR=4]="ERROR",M[M.SILENT=5]="SILENT";const O={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},R=L.INFO,P={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},V=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=P[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class F{constructor(t){this.name=t,this._logLevel=R,this._logHandler=V,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in L))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?O[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...t),this._logHandler(this,L.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...t),this._logHandler(this,L.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,L.INFO,...t),this._logHandler(this,L.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,L.WARN,...t),this._logHandler(this,L.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...t),this._logHandler(this,L.ERROR,...t)}}let U,B;const j=new WeakMap,q=new WeakMap,$=new WeakMap,H=new WeakMap,z=new WeakMap;let G={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return q.get(t);if("objectStoreNames"===e)return t.objectStoreNames||$.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Q(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function K(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(W(this),t),Q(j.get(this))}:function(...t){return Q(e.apply(W(this),t))}:function(t,...n){const i=e.call(W(this),t,...n);return $.set(i,t.sort?t.sort():[t]),Q(i)}:(t instanceof IDBTransaction&&function(t){if(q.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));q.set(t,e)}(t),n=t,(U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>n instanceof t))?new Proxy(t,G):t);var e,n}function Q(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(Q(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&j.set(e,t)})).catch((()=>{})),z.set(e,t),e}(t);if(H.has(t))return H.get(t);const e=K(t);return e!==t&&(H.set(t,e),z.set(e,t)),e}const W=t=>z.get(t);function X(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Q(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(Q(o.result),t.oldVersion,t.newVersion,Q(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const Y=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],Z=new Map;function tt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Z.get(e))return Z.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=J.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Y.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return Z.set(e,s),s}var et;et=G,G={...et,get:(t,e,n)=>tt(t,e)||et.get(t,e,n),has:(t,e)=>!!tt(t,e)||et.has(t,e)};class nt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const it="@firebase/app",rt="0.11.3",st=new F("@firebase/app"),ot="@firebase/app-compat",at="@firebase/analytics-compat",ct="@firebase/analytics",lt="@firebase/app-check-compat",ut="@firebase/app-check",ht="@firebase/auth",dt="@firebase/auth-compat",ft="@firebase/database",pt="@firebase/data-connect",gt="@firebase/database-compat",mt="@firebase/functions",yt="@firebase/functions-compat",vt="@firebase/installations",wt="@firebase/installations-compat",bt="@firebase/messaging",Et="@firebase/messaging-compat",_t="@firebase/performance",Tt="@firebase/performance-compat",St="@firebase/remote-config",It="@firebase/remote-config-compat",Ct="@firebase/storage",At="@firebase/storage-compat",Dt="@firebase/firestore",kt="@firebase/vertexai",Nt="@firebase/firestore-compat",xt="firebase",Lt="[DEFAULT]",Mt={[it]:"fire-core",[ot]:"fire-core-compat",[ct]:"fire-analytics",[at]:"fire-analytics-compat",[ut]:"fire-app-check",[lt]:"fire-app-check-compat",[ht]:"fire-auth",[dt]:"fire-auth-compat",[ft]:"fire-rtdb",[pt]:"fire-data-connect",[gt]:"fire-rtdb-compat",[mt]:"fire-fn",[yt]:"fire-fn-compat",[vt]:"fire-iid",[wt]:"fire-iid-compat",[bt]:"fire-fcm",[Et]:"fire-fcm-compat",[_t]:"fire-perf",[Tt]:"fire-perf-compat",[St]:"fire-rc",[It]:"fire-rc-compat",[Ct]:"fire-gcs",[At]:"fire-gcs-compat",[Dt]:"fire-fst",[Nt]:"fire-fst-compat",[kt]:"fire-vertex","fire-js":"fire-js",[xt]:"fire-js-all"},Ot=new Map,Rt=new Map,Pt=new Map;function Vt(t,e){try{t.container.addComponent(e)}catch(n){st.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ft(t){const e=t.name;if(Pt.has(e))return st.debug(`There were multiple attempts to register component ${e}.`),!1;Pt.set(e,t);for(const n of Ot.values())Vt(n,t);for(const n of Rt.values())Vt(n,t);return!0}function Ut(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Bt=new _("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class jt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}function qt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw Bt.create("bad-app-name",{appName:String(r)});if(n||(n=y()),!n)throw Bt.create("no-options");const s=Ot.get(r);if(s){if(S(n,s.options)&&S(i,s.config))return s;throw Bt.create("duplicate-app",{appName:r})}const o=new x(r);for(const c of Pt.values())o.addComponent(c);const a=new jt(n,i,o);return Ot.set(r,a),a}function $t(t=Lt){const e=Ot.get(t);if(!e&&t===Lt&&y())return qt();if(!e)throw Bt.create("no-app",{appName:t});return e}function Ht(t,e,n){var i;let r=null!==(i=Mt[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void st.warn(t.join(" "))}Ft(new D(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const zt="firebase-heartbeat-store";let Gt=null;function Kt(){return Gt||(Gt=X("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(zt)}catch(n){console.warn(n)}}}).catch((t=>{throw Bt.create("idb-open",{originalErrorMessage:t.message})}))),Gt}async function Qt(t,e){try{const n=(await Kt()).transaction(zt,"readwrite"),i=n.objectStore(zt);await i.put(e,Wt(t)),await n.done}catch(n){if(n instanceof E)st.warn(n.message);else{const t=Bt.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});st.warn(t.message)}}}function Wt(t){return`${t.name}!${t.options.appId}`}class Xt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Jt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yt();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const t=function(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){st.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Yt(),{heartbeatsToSend:n,unsentEntries:i}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Zt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Zt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=g(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return st.warn(e),""}}}function Yt(){return(new Date).toISOString().substring(0,10)}class Jt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!w()&&b().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Kt()).transaction(zt),n=await e.objectStore(zt).get(Wt(t));return await e.done,n}catch(e){if(e instanceof E)st.warn(e.message);else{const t=Bt.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});st.warn(t.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Zt(t){return g(JSON.stringify({version:2,heartbeats:t})).length}Ft(new D("platform-logger",(t=>new nt(t)),"PRIVATE")),Ft(new D("heartbeat",(t=>new Xt(t)),"PRIVATE")),Ht(it,rt,""),Ht(it,rt,"esm2017"),Ht("fire-js",""),Ht("firebase","11.5.0","app");const te="@firebase/installations",ee="0.6.13",ne=`w:${ee}`,ie="FIS_v2",re=new _("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function se(t){return t instanceof E&&t.code.includes("request-failed")}function oe({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function ae(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function ce(t,e){const n=(await e.json()).error;return re.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function le({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function ue(t){const e=await t();return e.status>=500&&e.status<600?t():e}function he(t){return new Promise((e=>{setTimeout(e,t)}))}const de=/^[cdef][\w-]{21}$/;function fe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){var e;return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(t);return de.test(e)?e:""}catch(t){return""}}function pe(t){return`${t.appName}!${t.appId}`}const ge=new Map;function me(t,e){const n=pe(t);ye(n,e),function(t,e){const n=(!ve&&"BroadcastChannel"in self&&(ve=new BroadcastChannel("[Firebase] FID Change"),ve.onmessage=t=>{ye(t.data.key,t.data.fid)}),ve);n&&n.postMessage({key:t,fid:e}),0===ge.size&&ve&&(ve.close(),ve=null)}(n,e)}function ye(t,e){const n=ge.get(t);if(n)for(const i of n)i(e)}let ve=null;const we="firebase-installations-store";let be=null;function Ee(){return be||(be=X("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(we)}})),be}async function _e(t,e){const n=pe(t),i=(await Ee()).transaction(we,"readwrite"),r=i.objectStore(we),s=await r.get(n);return await r.put(e,n),await i.done,s&&s.fid===e.fid||me(t,e.fid),e}async function Te(t){const e=pe(t),n=(await Ee()).transaction(we,"readwrite");await n.objectStore(we).delete(e),await n.done}async function Se(t,e){const n=pe(t),i=(await Ee()).transaction(we,"readwrite"),r=i.objectStore(we),s=await r.get(n),o=e(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||me(t,o.fid),o}async function Ie(t){let e;const n=await Se(t.appConfig,(n=>{const i=function(t){return De(t||{fid:fe(),registrationStatus:0})}(n),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(re.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=oe(t),r=le(t),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={fid:n,authVersion:ie,appId:t.appId,sdkVersion:ne},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await ue((()=>fetch(i,a)));if(c.ok){const t=await c.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:ae(t.authToken)}}throw await ce("Create Installation",c)}(t,e);return _e(t.appConfig,n)}catch(n){throw se(n)&&409===n.customData.serverCode?await Te(t.appConfig):await _e(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ce(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Ce(t){let e=await Ae(t.appConfig);for(;1===e.registrationStatus;)await he(100),e=await Ae(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Ie(t);return n||e}return e}function Ae(t){return Se(t,(t=>{if(!t)throw re.create("installation-not-found");return De(t)}))}function De(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function ke({appConfig:t,heartbeatServiceProvider:e},n){const i=function(t,{fid:e}){return`${oe(t)}/${e}/authTokens:generate`}(t,n),r=function(t,{refreshToken:e}){const n=le(t);return n.append("Authorization",function(t){return`${ie} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const o={installation:{sdkVersion:ne,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await ue((()=>fetch(i,a)));if(c.ok)return ae(await c.json());throw await ce("Generate Auth Token",c)}async function Ne(t,e=!1){let n;const i=await Se(t.appConfig,(i=>{if(!Le(i))throw re.create("not-registered");const r=i.authToken;if(!e&&(2===(s=r).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(s)))return i;var s;if(1===r.requestStatus)return n=async function(t,e){let n=await xe(t.appConfig);for(;1===n.authToken.requestStatus;)await he(100),n=await xe(t.appConfig);const i=n.authToken;return 0===i.requestStatus?Ne(t,e):i}(t,e),i;{if(!navigator.onLine)throw re.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return n=async function(t,e){try{const n=await ke(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await _e(t.appConfig,i),n}catch(n){if(!se(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await _e(t.appConfig,n)}else await Te(t.appConfig);throw n}}(t,e),e}}));return n?await n:i.authToken}function xe(t){return Se(t,(t=>{if(!Le(t))throw re.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function Le(t){return void 0!==t&&2===t.registrationStatus}function Me(t){return re.create("missing-app-config-values",{valueName:t})}const Oe="installations";Ft(new D(Oe,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw Me("App Configuration");if(!t.name)throw Me("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Me(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Ut(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Ft(new D("installations-internal",(t=>{const e=Ut(t.getProvider("app").getImmediate(),Oe).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:i}=await Ie(e);return i?i.catch(console.error):Ne(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await Ie(t);e&&await e}(n),(await Ne(n,e)).token}(e,t)}}),"PRIVATE")),Ht(te,ee),Ht(te,ee,"esm2017");const Re="analytics",Pe="https://www.googletagmanager.com/gtag/js",Ve=new F("@firebase/analytics"),Fe=new _("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ue(t){if(!t.startsWith(Pe)){const e=Fe.create("invalid-gtag-resource",{gtagURL:t});return Ve.warn(e.message),""}return t}function Be(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const je=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function qe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function $e(t,e=je,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw Fe.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Fe.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ze;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),He({appId:i,apiKey:r,measurementId:s},o,a,e)}async function He(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=je){var s;const{appId:o,measurementId:a}=t;try{await function(t,e){return new Promise(((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener((()=>{clearTimeout(s),i(Fe.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(c){if(a)return Ve.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const e=await async function(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:qe(i)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw Fe.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return r.deleteThrottleMetadata(o),e}catch(c){const e=c;if(!function(t){if(!(t instanceof E&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(e)){if(r.deleteThrottleMetadata(o),a)return Ve.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw c}const l=503===Number(null===(s=null==e?void 0:e.customData)||void 0===s?void 0:s.httpStatus)?C(n,r.intervalMillis,30):C(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(o,u),Ve.debug(`Calling attemptFetch again in ${l} millis`),He(t,u,i,r)}}class ze{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}async function Ge(t,e,n,i,r,s,o){var a;const c=$e(t);c.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ve.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Ve.error(t))),e.push(c);const l=async function(){if(!w())return Ve.warn(Fe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await b()}catch(t){return Ve.warn(Fe.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[u,h]=await Promise.all([c,l]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Pe)&&n.src.includes(t))return n;return null})(s)||function(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",e)),n}(0,{createScriptURL:Ue}),i=document.createElement("script"),r=`${Pe}?l=${t}&id=${e}`;i.src=n?null==n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(s,u.measurementId),r("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),r("config",u.measurementId,d),u.measurementId}class Ke{constructor(t){this.app=t}_delete(){return delete Qe[this.app.options.appId],Promise.resolve()}}let Qe={},We=[];const Xe={};let Ye,Je,Ze="dataLayer",tn=!1;function en(t,e,n){!function(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Fe.create("invalid-analytics-context",{errorInfo:e});Ve.warn(n.message)}}();const i=t.options.appId;if(!i)throw Fe.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Fe.create("no-api-key");Ve.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qe[i])throw Fe.create("already-exists",{id:i});if(!tn){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Ze);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,i,r){let s=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function(t,e,n,i){return async function(r,...s){try{if("event"===r){const[i,r]=s;await async function(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await Be(n);for(const n of t){const t=i.find((t=>t.measurementId===n)),r=t&&e[t.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Ve.error(s)}}(t,e,n,i,r)}else if("config"===r){const[r,o]=s;await async function(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const t=(await Be(n)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(a){Ve.error(a)}t("config",r,s)}(t,e,n,i,r,o)}else if("consent"===r){const[e,n]=s;t("consent",e,n)}else if("get"===r){const[e,n,i]=s;t("get",e,n,i)}else if("set"===r){const[e]=s;t("set",e)}else t(r,...s)}catch(o){Ve.error(o)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}(Qe,We,Xe,Ze,"gtag");Je=t,Ye=e,tn=!0}return Qe[i]=Ge(t,We,Xe,e,Ye,Ze,n),new Ke(t)}const nn="@firebase/analytics",rn="0.10.12";Ft(new D(Re,((t,{options:e})=>en(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),Ft(new D("analytics-internal",(function(t){try{const e=t.getProvider(Re).getImmediate();return{logEvent:(t,n,i)=>function(t,e,n,i){t=A(t),async function(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const r=await e;t("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Je,Qe[t.app.options.appId],e,n,i).catch((t=>Ve.error(t)))}(e,t,n,i)}}catch(e){throw Fe.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Ht(nn,rn),Ht(nn,rn,"esm2017");var sn,on="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function i(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var i=e-this.blockSize,r=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=i;)n(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(r[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<e;)if(r[s++]=t[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var r={};function s(t){return-128<=t&&128>t?function(t){var e=r;return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=function(t){return new i([0|t],0>t?-1:0)}(t)}(t):new i([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return d(o(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new i(e,0)}var a=s(0),c=s(1),l=s(16777216);function u(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new i(n,~t.h).add(c)}function f(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function g(t,e){this.g=t,this.h=e}function m(t,e){if(u(e))throw Error("division by zero");if(u(t))return new g(a,a);if(h(t))return e=m(d(t),e),new g(d(e.g),d(e.h));if(h(e))return e=m(t,d(e)),new g(d(e.g),e.h);if(30<t.g.length){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=c,i=e;0>=i.l(t);)n=y(n),i=y(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!u(i);){var l=s.add(i);0>=l.l(t)&&(r=r.add(n),s=l),i=v(i,1),n=v(n,1)}return e=f(t,r.j(e)),new g(r,e)}for(r=a;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),l=(s=o(n)).j(e);h(l)||0<l.l(t);)l=(s=o(n-=i)).j(e);u(s)&&(s=c),r=r.add(s),t=f(t,l)}return new g(r,t)}function y(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new i(n,t.h)}function v(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],o=0;o<r;o++)s[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new i(s,t.h)}(t=i.prototype).m=function(){if(h(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.i(n);t+=(0<=i?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(u(this))return"0";if(h(this))return"-"+d(this).toString(t);for(var e=o(Math.pow(t,6)),n=this,i="";;){var r=m(n,e).g,s=((0<(n=f(n,r.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=f(this,t))?-1:u(t)?0:1},t.abs=function(){return h(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var o=r+(65535&this.i(s))+(65535&t.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(u(this)||u(t))return a;if(h(this))return h(t)?d(this).j(d(t)):d(d(this).j(t));if(h(t))return d(this.j(d(t)));if(0>this.l(l)&&0>t.l(l))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var c=this.i(r)>>>16,f=65535&this.i(r),g=t.i(s)>>>16,m=65535&t.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=c*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=c*g,p(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new i(n,0)},t.A=function(t){return m(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new i(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new i(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+c),n);8>c?(c=o(Math.pow(n,c)),r=r.j(c).add(o(l))):r=(r=r.j(i)).add(o(l))}return r},sn=i}).apply(void 0!==on?on:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var an,cn,ln,un,hn,dn,fn,pn,gn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t},n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof gn&&gn];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,i){if(i)t:{var r=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in r))break t;r=r[o]}(i=i(s=r[t=t[t.length-1]]))!=s&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,i=!1,r={next:function(){if(!i&&n<t.length){var r=n++;return{value:e(0,t[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(t,e){return e}))}}));var i=i||{},r=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function c(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function l(t,e,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function f(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(s(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function p(t){return/^[\s\xa0]*$/.test(t)}function g(){var t=r.navigator;return t&&(t=t.userAgent)?t:""}function m(t){return m[" "](t),t}m[" "]=function(){};var y=!(-1==g().indexOf("Gecko")||-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge")||-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE")||-1!=g().indexOf("Edge"));function v(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function w(t){const e={};for(const n in t)e[n]=t[n];return e}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<b.length;e++)n=b[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function _(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function T(t){r.setTimeout((()=>{throw t}),0)}function S(){var t=k;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var I=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new C),(t=>t.reset()));class C{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let A,D=!1,k=new class{constructor(){this.h=this.g=null}add(t,e){const n=I.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const t=r.Promise.resolve(void 0);A=()=>{t.then(x)}};var x=()=>{for(var t;t=S();){try{t.h.call(t.g)}catch(n){T(n)}var e=I;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}D=!1};function L(){this.s=this.s,this.C=this.C}function M(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},M.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};r.addEventListener("test",t,e),r.removeEventListener("test",t,e)}catch(n){}return t}();function R(t,e){if(M.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y){t:{try{m(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:P[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&R.aa.h.call(this)}}h(R,M);var P={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var V="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++F,this.da=this.fa=!1}function B(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function j(t){this.src=t,this.g={},this.h=0}function q(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=Array.prototype.indexOf.call(r,e,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(B(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function $(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}j.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=$(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new U(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var H="closure_lm_"+(1e6*Math.random()|0),z={};function G(t,e,n,i,r){if(i&&i.once)return Q(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)G(t,e[s],n,i,r);return null}return n=et(n),t&&t[V]?t.K(e,n,o(i)?!!i.capture:!!i,r):K(t,e,n,!1,i,r)}function K(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,c=Z(t);if(c||(t[H]=c=new j(t)),(n=c.add(e,n,i,a,s)).proxy)return n;if(i=function(){const t=J;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)O||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Y(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Q(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Q(t,e[s],n,i,r);return null}return n=et(n),t&&t[V]?t.L(e,n,o(i)?!!i.capture:!!i,r):K(t,e,n,!0,i,r)}function W(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)W(t,e[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=et(n),t&&t[V]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=$(s=t.g[e],n,i,r))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Z(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$(e,n,i,r)),(n=-1<t?e[t]:null)&&X(n))}function X(t){if("number"!=typeof t&&t&&!t.da){var e=t.src;if(e&&e[V])q(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Y(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Z(e))?(q(n,t),0==n.h&&(n.src=null,e[H]=null)):B(t)}}}function Y(t){return t in z?z[t]:z[t]="on"+t}function J(t,e){if(t.da)t=!0;else{e=new R(e,this);var n=t.listener,i=t.ha||t.src;t.fa&&X(t),t=n.call(i,e)}return t}function Z(t){return(t=t[H])instanceof j?t:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(t){return"function"==typeof t?t:(t[tt]||(t[tt]=function(e){return t.handleEvent(e)}),t[tt])}function nt(){L.call(this),this.i=new j(this),this.M=this,this.F=null}function it(t,e){var n,i=t.F;if(i)for(n=[];i;i=i.F)n.push(i);if(t=t.M,i=e.type||e,"string"==typeof e)e=new M(e,t);else if(e instanceof M)e.target=e.target||t;else{var r=e;E(e=new M(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=rt(o,i,!0,e)&&r}if(r=rt(o=e.g=t,i,!0,e)&&r,r=rt(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=rt(o=e.g=n[s],i,!1,e)&&r}function rt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&q(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}function st(t,e,n){if("function"==typeof t)n&&(t=l(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=l(t.handleEvent,t)}return 2147483647<Number(e)?-1:r.setTimeout(t,e||0)}function ot(t){t.g=st((()=>{t.g=null,t.i&&(t.i=!1,ot(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(nt,L),nt.prototype[V]=!0,nt.prototype.removeEventListener=function(t,e,n,i){W(this,t,e,n,i)},nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)B(n[i]);delete e.g[t],e.h--}}this.F=null},nt.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},nt.prototype.L=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class at extends L{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ct(t){L.call(this),this.h=t,this.g={}}h(ct,L);var lt=[];function ut(t){v(t.g,(function(t,e){this.g.hasOwnProperty(e)&&X(t)}),t),t.g={}}ct.prototype.N=function(){ct.aa.N.call(this),ut(this)},ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=r.JSON.stringify,dt=r.JSON.parse,ft=class{stringify(t){return r.JSON.stringify(t,void 0)}parse(t){return r.JSON.parse(t,void 0)}};function pt(){}function gt(t){return t.h||(t.h=t.i())}function mt(){}pt.prototype.h=null;var yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vt(){M.call(this,"d")}function wt(){M.call(this,"c")}h(vt,M),h(wt,M);var bt={},Et=null;function _t(){return Et=Et||new nt}function Tt(t){M.call(this,bt.La,t)}function St(t){const e=_t();it(e,new Tt(e))}function It(t,e){M.call(this,bt.STAT_EVENT,t),this.stat=e}function Ct(t){const e=_t();it(e,new It(e,t))}function At(t,e){M.call(this,bt.Ma,t),this.size=e}function Dt(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return r.setTimeout((function(){t()}),e)}function kt(){this.g=!0}function Nt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ht(n)}catch(a){return e}}(t,n)+(i?" "+i:"")}))}bt.La="serverreachability",h(Tt,M),bt.STAT_EVENT="statevent",h(It,M),bt.Ma="timingevent",h(At,M),kt.prototype.xa=function(){this.g=!1},kt.prototype.info=function(){};var xt,Lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ot(){}function Rt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.R=i||1,this.U=new ct(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pt}function Pt(){this.i=null,this.g="",this.h=!1}h(Ot,pt),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},xt=new Ot;var Vt={},Ft={};function Ut(t,e,n){t.L=1,t.v=he(oe(e)),t.m=n,t.P=!0,Bt(t,null)}function Bt(t,e){t.F=Date.now(),$t(t),t.A=oe(t.v);var n=t.A,i=t.R;Array.isArray(i)||(i=[String(i)]),Ie(n.i,"t",i),t.C=0,n=t.j.J,t.h=new Pt,t.g=_n(t.j,n?e:null,!t.m),0<t.O&&(t.M=new at(l(t.Y,t,t.g),t.O)),e=t.U,n=t.g,i=t.ca;var r="readystatechange";Array.isArray(r)||(r&&(lt[0]=r.toString()),r=lt);for(var s=0;s<r.length;s++){var o=G(n,r[s],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?w(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),St(),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function jt(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.j.Ca}function qt(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Ft:(n=Number(e.substring(n,i)),isNaN(n)?Vt:(i+=1)+n>e.length?Ft:(e=e.slice(i,i+n),t.C=i+n,e))}function $t(t){t.S=Date.now()+t.I,Ht(t,t.I)}function Ht(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Dt(l(t.ba,t),e)}function zt(t){t.B&&(r.clearTimeout(t.B),t.B=null)}function Gt(t){0==t.j.G||t.J||yn(t.j,t)}function Kt(t){zt(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ut(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Qt(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||Zt(n.h,t)))if(!t.K&&Zt(n.h,t)&&3==n.G){try{var i=n.Da.g.parse(e)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;mn(n),Xe(n)}rn(n),Ct(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Dt(l(n.Za,n),6e3));if(1>=Jt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((t.K||n.g==t)&&mn(n),!p(e))for(r=n.Da.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const e=l[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const r=l[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(te(s,s.h),s.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.ya=t,ue(i.I,i.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((i=n).qa=En(i,i.J?i.ia:null,i.W),o.K){ee(i.h,o);var a=o,c=i.L;c&&(a.I=c),a.B&&(zt(a),$t(a)),i.g=o}else nn(i);0<n.i.length&&Je(n)}else"stop"!=l[0]&&"close"!=l[0]||wn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?wn(n,7):We(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}St()}catch(u){}}Rt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==ze(t)?e.j():this.Y(t)},Rt.prototype.Y=function(t){try{if(t==this.g)t:{const d=ze(this.g);var e=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ge(this.g)))){this.J||4!=d||7==e||St(),zt(this);var n=this.g.Z();this.X=n;e:if(jt(this)){var i=Ge(this.g);t="";var s=i.length,o=4==ze(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Kt(this),Gt(this);var a="";break e}this.h.i=new r.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:!(o&&e==s-1)});i.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break e}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ct(12),Kt(this),Gt(this);break t}Nt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qt(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=qt(this,a),t==Ft){4==d&&(this.s=4,Ct(14),n=!1),Nt(this.i,this.l,null,"[Incomplete Response]");break}if(t==Vt){this.s=4,Ct(15),Nt(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Nt(this.i,this.l,t,null),Qt(this,t)}if(jt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ct(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ct(11))}}else Nt(this.i,this.l,a,"[Invalid Chunked Response]"),Kt(this),Gt(this)}else Nt(this.i,this.l,a,null),Qt(this,a);4==d&&Kt(this),this.o&&!this.J&&(4==d?yn(this.j,this):(this.o=!1,$t(this)))}else(function(t){const e={};t=(t.g&&2<=ze(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(p(t[i]))continue;var n=_(t[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Kt(this),Gt(this)}}}catch(d){}},Rt.prototype.cancel=function(){this.J=!0,Kt(this)},Rt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(St(),Ct(17)),Kt(this),this.s=2,Gt(this)):Ht(this,this.S-t)};var Wt=class{constructor(t,e){this.g=t,this.map=e}};function Xt(t){this.l=t||10,t=r.PerformanceNavigationTiming?0<(t=r.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Jt(t){return t.h?1:t.g?t.g.size:0}function Zt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function te(t,e){t.g?t.g.add(e):t.h=e}function ee(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ne(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function ie(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(s(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}(t),i=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}Xt.prototype.cancel=function(){if(this.i=ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function se(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof se){this.h=t.h,ae(this,t.j),this.o=t.o,this.g=t.g,ce(this,t.s),this.l=t.l;var e=t.i,n=new Ee;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),le(this,n),this.m=t.m}else t&&(e=String(t).match(re))?(this.h=!1,ae(this,e[1]||"",!0),this.o=de(e[2]||""),this.g=de(e[3]||"",!0),ce(this,e[4]),this.l=de(e[5]||"",!0),le(this,e[6]||"",!0),this.m=de(e[7]||"")):(this.h=!1,this.i=new Ee(null,this.h))}function oe(t){return new se(t)}function ae(t,e,n){t.j=n?de(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ce(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function le(t,e,n){e instanceof Ee?(t.i=e,function(t,e){e&&!t.j&&(_e(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Te(this,e),Ie(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=fe(e,we)),t.i=new Ee(e,t.h))}function ue(t,e,n){t.i.set(e,n)}function he(t){return ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function de(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fe(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,pe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}se.prototype.toString=function(){var t=[],e=this.j;e&&t.push(fe(e,me,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(fe(e,me,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(fe(n,"/"==n.charAt(0)?ve:ye,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",fe(n,be)),t.join("")};var ge,me=/[#\/\?@]/g,ye=/[#\?:]/g,ve=/[#\?]/g,we=/[#\?@]/g,be=/#/g;function Ee(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _e(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Te(t,e){_e(t),e=Ce(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Se(t,e){return _e(t),e=Ce(t,e),t.g.has(e)}function Ie(t,e,n){Te(t,e),0<n.length&&(t.i=null,t.g.set(Ce(t,e),d(n)),t.h+=n.length)}function Ce(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ae(t,e,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function De(){this.g=new ft}function ke(t,e,n){const i=n||"";try{ie(t,(function(t,n){let r=t;o(t)&&(r=ht(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Ne(t){this.l=t.Ub||null,this.j=t.eb||!1}function xe(t,e){nt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Le(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function Me(t){t.readyState=4,t.l=null,t.j=null,t.v=null,Oe(t)}function Oe(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Re(t){let e="";return v(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Pe(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Re(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ue(t,e,n))}function Ve(t){nt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Ee.prototype).add=function(t,e){_e(this),this.i=null,t=Ce(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){_e(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},t.na=function(){_e(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},t.V=function(t){_e(this);let e=[];if("string"==typeof t)Se(this,t)&&(e=e.concat(this.g.get(Ce(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return _e(this),this.i=null,Se(this,t=Ce(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")},h(Ne,pt),Ne.prototype.g=function(){return new xe(this.l,this.j)},Ne.prototype.i=(ge={},function(){return ge}),h(xe,nt),(t=xe.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,Oe(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||r).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Me(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Oe(this)),this.g&&(this.readyState=3,Oe(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==r.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Le(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Me(this):Oe(this),3==this.readyState&&Le(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,Me(this))},t.Qa=function(t){this.g&&(this.response=t,Me(this))},t.ga=function(){this.g&&Me(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(xe.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Ve,nt);var Fe=/^https?$/i,Ue=["POST","PUT"];function Be(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,je(t),$e(t)}function je(t){t.A||(t.A=!0,it(t,"complete"),it(t,"error"))}function qe(t){if(t.h&&void 0!==i&&(!t.v[1]||4!=ze(t)||2!=t.Z()))if(t.u&&4==ze(t))st(t.Ea,0,t);else if(it(t,"readystatechange"),4==ze(t)){t.h=!1;try{const i=t.Z();t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===i){var o=String(t.D).match(re)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!Fe.test(o?o.toLowerCase():"")}n=s}if(n)it(t,"complete"),it(t,"success");else{t.m=6;try{var a=2<ze(t)?t.g.statusText:""}catch(c){a=""}t.l=a+" ["+t.Z()+"]",je(t)}}finally{$e(t)}}}function $e(t,e){if(t.g){He(t);const i=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||it(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function He(t){t.I&&(r.clearTimeout(t.I),t.I=null)}function ze(t){return t.g?t.g.readyState:0}function Ge(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ke(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qe(t){this.Aa=0,this.i=[],this.j=new kt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ke("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ke("baseRetryDelayMs",5e3,t),this.cb=Ke("retryDelaySeedMs",1e4,t),this.Wa=Ke("forwardChannelMaxRetries",2,t),this.wa=Ke("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new Xt(t&&t.concurrentRequestLimit),this.Da=new De,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function We(t){if(Ye(t),3==t.G){var e=t.U++,n=oe(t.I);if(ue(n,"SID",t.K),ue(n,"RID",e),ue(n,"TYPE","terminate"),tn(t,n),(e=new Rt(t,t.j,e)).L=2,e.v=he(oe(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=e.v,n=!0),n||(e.g=_n(e.j,null),e.g.ea(e.v)),e.F=Date.now(),$t(e)}bn(t)}function Xe(t){t.g&&(sn(t),t.g.cancel(),t.g=null)}function Ye(t){Xe(t),t.u&&(r.clearTimeout(t.u),t.u=null),mn(t),t.h.cancel(),t.s&&("number"==typeof t.s&&r.clearTimeout(t.s),t.s=null)}function Je(t){if(!Yt(t.h)&&!t.s){t.s=!0;var e=t.Ga;A||N(),D||(A(),D=!0),k.add(e,t),t.B=0}}function Ze(t,e){var n;n=e?e.l:t.U++;const i=oe(t.I);ue(i,"SID",t.K),ue(i,"RID",n),ue(i,"AID",t.T),tn(t,i),t.m&&t.o&&Pe(i,t.m,t.o),n=new Rt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=en(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),te(t.h,n),Ut(n,i,e)}function tn(t,e){t.H&&v(t.H,(function(t,n){ue(e,n,t)})),t.l&&ie({},(function(t,n){ue(e,n,t)}))}function en(t,e,n){n=Math.min(t.i.length,n);var i=t.l?l(t.l.Na,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const c=r[a].map;if(n-=e,0>n)e=Math.max(0,r[a].g-100),o=!1;else try{ke(c,t,"req"+n+"_")}catch(s){i&&i(c)}}if(o){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,i}function nn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;A||N(),D||(A(),D=!0),k.add(e,t),t.v=0}}function rn(t){return!(t.g||t.u||3<=t.v||(t.Y++,t.u=Dt(l(t.Fa,t),vn(t,t.v)),t.v++,0))}function sn(t){null!=t.A&&(r.clearTimeout(t.A),t.A=null)}function on(t){t.g=new Rt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=oe(t.qa);ue(e,"RID","rpc"),ue(e,"SID",t.K),ue(e,"AID",t.T),ue(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&ue(e,"TO",t.ja),ue(e,"TYPE","xmlhttp"),tn(t,e),t.m&&t.o&&Pe(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=he(oe(e)),n.m=null,n.P=!0,Bt(n,t)}function mn(t){null!=t.C&&(r.clearTimeout(t.C),t.C=null)}function yn(t,e){var n=null;if(t.g==e){mn(t),sn(t),t.g=null;var i=2}else{if(!Zt(t.h,e))return;n=e.D,ee(t.h,e),i=1}if(0!=t.G)if(e.o)if(1==i){n=e.m?e.m.length:0,e=Date.now()-e.F;var r=t.B;it(i=_t(),new At(i,n)),Je(t)}else nn(t);else if(3==(r=e.s)||0==r&&0<e.X||!(1==i&&function(t,e){return!(Jt(t.h)>=t.h.j-(t.s?1:0)||(t.s?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa)||(t.s=Dt(l(t.Ga,t,e),vn(t,t.B)),t.B++,0)))}(t,e)||2==i&&rn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:wn(t,5);break;case 4:wn(t,10);break;case 3:wn(t,6);break;default:wn(t,2)}}function vn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function wn(t,e){if(t.j.info("Error code "+e),2==e){var n=l(t.fb,t),i=t.Xa;const e=!i;i=new se(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||ae(i,"https"),he(i),e?function(t,e){const n=new kt;if(r.Image){const i=new Image;i.onload=u(Ae,n,"TestLoadImage: loaded",!0,e,i),i.onerror=u(Ae,n,"TestLoadImage: error",!1,e,i),i.onabort=u(Ae,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=u(Ae,n,"TestLoadImage: timeout",!1,e,i),r.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new kt;const n=new AbortController,i=setTimeout((()=>{n.abort(),Ae(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(i),t.ok?Ae(0,0,!0,e):Ae(0,0,!1,e)})).catch((()=>{clearTimeout(i),Ae(0,0,!1,e)}))}(i.toString(),n)}else Ct(2);t.G=0,t.l&&t.l.sa(e),bn(t),Ye(t)}function bn(t){if(t.G=0,t.ka=[],t.l){const e=ne(t.h);0==e.length&&0==t.i.length||(f(t.ka,e),f(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function En(t,e,n){var i=n instanceof se?oe(n):new se(n);if(""!=i.g)e&&(i.g=e+"."+i.g),ce(i,i.s);else{var s=r.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new se(null);i&&ae(o,i),e&&(o.g=e),s&&ce(o,s),n&&(o.l=n),i=o}return n=t.D,e=t.ya,n&&e&&ue(i,n,e),ue(i,"VER",t.la),tn(t,i),i}function _n(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Ve(new Ne({eb:n})):new Ve(t.pa)).Ha(t.J),e}function Tn(){}function Sn(){}function In(t,e){nt.call(this),this.g=new Qe(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!p(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Dn(this)}function Cn(t){vt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function An(){wt.call(this),this.status=1}function Dn(t){this.g=t}(t=Ve.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xt.g(),this.v=this.o?gt(this.o):gt(xt),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void Be(this,o)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=r.FormData&&t instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Ue,e,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{He(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){Be(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,it(this,"complete"),it(this,"abort"),$e(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$e(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qe(this):this.bb())},t.bb=function(){qe(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<ze(this)?this.g.status:-1}catch(ge){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(ge){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=Qe.prototype).la=8,t.G=1,t.connect=function(t,e,n,i){Ct(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=En(this,null,this.W),Je(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Rt(this,this.j,t);let s=this.o;if(this.S&&(s?(s=w(s),E(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=en(this,r,e),ue(n=oe(this.I),"RID",t),ue(n,"CVER",22),this.D&&ue(n,"X-HTTP-Session-Id",this.D),tn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Re(s)))+"&"+e:this.m&&Pe(n,this.m,s)),te(this.h,r),this.Ua&&ue(n,"TYPE","init"),this.P?(ue(n,"$req",e),ue(n,"SID","null"),r.T=!0,Ut(r,n,null)):Ut(r,n,e),this.G=2}}else 3==this.G&&(t?Ze(this,t):0==this.i.length||Yt(this.h)||Ze(this))},t.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Dt(l(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Xe(this),on(this))},t.Za=function(){null!=this.C&&(this.C=null,Xe(this),rn(this),Ct(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=Tn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Sn.prototype.g=function(t,e){return new In(t,e)},h(In,nt),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){We(this.g)},In.prototype.o=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=ht(t),t=n);e.i.push(new Wt(e.Ya++,t)),3==e.G&&Je(e)},In.prototype.N=function(){this.g.l=null,delete this.j,We(this.g),delete this.g,In.aa.N.call(this)},h(Cn,vt),h(An,wt),h(Dn,Tn),Dn.prototype.ua=function(){it(this.g,"a")},Dn.prototype.ta=function(t){it(this.g,new Cn(t))},Dn.prototype.sa=function(t){it(this.g,new An)},Dn.prototype.ra=function(){it(this.g,"b")},Sn.prototype.createWebChannel=Sn.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,pn=function(){return new Sn},fn=function(){return _t()},dn=bt,hn={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lt.NO_ERROR=0,Lt.TIMEOUT=8,Lt.HTTP_ERROR=6,un=Lt,Mt.COMPLETE="complete",ln=Mt,mt.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",nt.prototype.listen=nt.prototype.K,cn=mt,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,an=Ve}).apply(void 0!==gn?gn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const mn="@firebase/firestore",yn="4.7.10";class vn{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let wn="11.5.0";const bn=new F("@firebase/firestore");function En(){return bn.logLevel}function _n(t,...e){if(bn.logLevel<=L.DEBUG){const n=e.map(In);bn.debug(`Firestore (${wn}): ${t}`,...n)}}function Tn(t,...e){if(bn.logLevel<=L.ERROR){const n=e.map(In);bn.error(`Firestore (${wn}): ${t}`,...n)}}function Sn(t,...e){if(bn.logLevel<=L.WARN){const n=e.map(In);bn.warn(`Firestore (${wn}): ${t}`,...n)}}function In(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function Cn(t="Unexpected state"){const e=`FIRESTORE (${wn}) INTERNAL ASSERTION FAILED: `+t;throw Tn(e),new Error(e)}function An(t,e){t||Cn()}function Dn(t,e){return t}const kn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nn extends E{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xn{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Ln{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Mn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(vn.UNAUTHENTICATED)))}shutdown(){}}class On{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Rn{constructor(t){this.t=t,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){An(void 0===this.o);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new xn,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{_n("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(_n("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new xn)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(_n("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(An("string"==typeof e.accessToken),new Ln(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return An(null===t||"string"==typeof t),new vn(t)}}class Pn{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Vn{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Pn(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Un{constructor(t,e){var n;this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,null!=(n=t)&&void 0!==n.settings&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){An(void 0===this.o);const n=t=>{null!=t.error&&_n("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,_n("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{_n("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):_n("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new Fn(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(An("string"==typeof t.token),this.R=t.token,new Fn(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Bn(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class jn{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Bn(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function qn(t,e){return t<e?-1:t>e?1:0}function $n(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return qn(i,r);{const s=new TextEncoder,o=zn(s.encode(Hn(t,n)),s.encode(Hn(e,n)));return 0!==o?o:qn(i,r)}}n+=i>65535?2:1}return qn(t.length,e.length)}function Hn(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function zn(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return qn(t[n],e[n]);return qn(t.length,e.length)}function Gn(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}const Kn=-62135596800,Qn=1e6;class Wn{static now(){return Wn.fromMillis(Date.now())}static fromDate(t){return Wn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*Qn);return new Wn(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Nn(kn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Nn(kn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Kn)throw new Nn(kn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nn(kn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qn}_compareTo(t){return this.seconds===t.seconds?qn(this.nanoseconds,t.nanoseconds):qn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Kn;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xn{static fromTimestamp(t){return new Xn(t)}static min(){return new Xn(new Wn(0,0))}static max(){return new Xn(new Wn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Yn="__name__";class Jn{constructor(t,e,n){void 0===e?e=0:e>t.length&&Cn(),void 0===n?n=t.length-e:n>t.length-e&&Cn(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Jn.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Jn?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=Jn.compareSegments(t.get(i),e.get(i));if(0!==n)return n}return qn(t.length,e.length)}static compareSegments(t,e){const n=Jn.isNumericId(t),i=Jn.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?Jn.extractNumericId(t).compare(Jn.extractNumericId(e)):$n(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return sn.fromString(t.substring(4,t.length-2))}}class Zn extends Jn{construct(t,e,n){return new Zn(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Nn(kn.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Zn(e)}static emptyPath(){return new Zn([])}}const ti=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ei extends Jn{construct(t,e,n){return new ei(t,e,n)}static isValidIdentifier(t){return ti.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ei.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Yn}static keyField(){return new ei([Yn])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Nn(kn.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Nn(kn.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Nn(kn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Nn(kn.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ei(e)}static emptyPath(){return new ei([])}}class ni{constructor(t){this.path=t}static fromPath(t){return new ni(Zn.fromString(t))}static fromName(t){return new ni(Zn.fromString(t).popFirst(5))}static empty(){return new ni(Zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Zn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Zn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ni(new Zn(t.slice()))}}function ii(t){return new ri(t.readTime,t.key,-1)}class ri{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new ri(Xn.min(),ni.empty(),-1)}static max(){return new ri(Xn.max(),ni.empty(),-1)}}function si(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ni.comparator(t.documentKey,e.documentKey),0!==n?n:qn(t.largestBatchId,e.largestBatchId))}class oi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function ai(t){if(t.code!==kn.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;_n("LocalStore","Unexpectedly lost primary lease")}class ci{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Cn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ci(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ci?e:ci.resolve(e)}catch(e){return ci.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ci.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ci.reject(e)}static resolve(t){return new ci(((e,n)=>{e(t)}))}static reject(t){return new ci(((e,n)=>{n(t)}))}static waitFor(t){return new ci(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=ci.resolve(!1);for(const n of t)e=e.next((t=>t?ci.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new ci(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new ci(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}function li(t){return"IndexedDbTransactionError"===t.name}class ui{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.oe(t),this._e=t=>e.writeSequenceNumber(t))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}function hi(t){return null==t}function di(t){return 0===t&&1/t==-1/0}function fi(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function pi(t){return t+""}function gi(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yi(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}ui.ae=-1;class vi{constructor(t,e){this.comparator=t,this.root=e||bi.EMPTY}insert(t,e){return new vi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,bi.BLACK,null,null))}remove(t){return new vi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new wi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new wi(this.root,t,this.comparator,!1)}getReverseIterator(){return new wi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new wi(this.root,t,this.comparator,!0)}}class wi{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bi{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:bi.RED,this.left=null!=i?i:bi.EMPTY,this.right=null!=r?r:bi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new bi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return bi.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Cn();if(this.right.isRed())throw Cn();const t=this.left.check();if(t!==this.right.check())throw Cn();return t+(this.isRed()?0:1)}}bi.EMPTY=null,bi.RED=!0,bi.BLACK=!1,bi.EMPTY=new class{constructor(){this.size=0}get key(){throw Cn()}get value(){throw Cn()}get color(){throw Cn()}get left(){throw Cn()}get right(){throw Cn()}copy(t,e,n,i,r){return this}insert(t,e,n){return new bi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ei{constructor(t){this.comparator=t,this.data=new vi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new _i(this.data.getIterator())}getIteratorFrom(t){return new _i(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Ei))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ei(this.comparator);return e.data=t,e}}class _i{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(t){this.fields=t,t.sort(ei.comparator)}static empty(){return new Ti([])}unionWith(t){let e=new Ei(ei.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ti(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Gn(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Si extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ii{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Si("Invalid base64 string: "+e):e}}(t);return new Ii(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Ii(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return qn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ii.EMPTY_BYTE_STRING=new Ii("");const Ci=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(t){if(An(!!t),"string"==typeof t){let e=0;const n=Ci.exec(t);if(An(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Di(t.seconds),nanos:Di(t.nanos)}}function Di(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ki(t){return"string"==typeof t?Ii.fromBase64String(t):Ii.fromUint8Array(t)}const Ni="server_timestamp",xi="__type__",Li="__previous_value__",Mi="__local_write_time__";function Oi(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[xi])||void 0===n?void 0:n.stringValue)===Ni}function Ri(t){const e=t.mapValue.fields[Li];return Oi(e)?Ri(e):e}function Pi(t){const e=Ai(t.mapValue.fields[Mi].timestampValue);return new Wn(e.seconds,e.nanos)}class Vi{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}const Fi="(default)";class Ui{constructor(t,e){this.projectId=t,this.database=e||Fi}static empty(){return new Ui("","")}get isDefaultDatabase(){return this.database===Fi}isEqual(t){return t instanceof Ui&&t.projectId===this.projectId&&t.database===this.database}}const Bi="__type__",ji="__max__",qi={fields:{__type__:{stringValue:ji}}},$i="__vector__",Hi="value";function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oi(t)?4:function(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ji}(t)?9007199254740991:function(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[Bi])||void 0===n?void 0:n.stringValue)===$i}(t)?10:11:Cn()}function Gi(t,e){if(t===e)return!0;const n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pi(t).isEqual(Pi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Ai(t.timestampValue),i=Ai(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,ki(t.bytesValue).isEqual(ki(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Di(t.geoPointValue.latitude)===Di(e.geoPointValue.latitude)&&Di(t.geoPointValue.longitude)===Di(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Di(t.integerValue)===Di(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Di(t.doubleValue),i=Di(e.doubleValue);return n===i?di(n)===di(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Gn(t.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(gi(n)!==gi(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Gi(n[r],i[r])))return!1;return!0}(t,e);default:return Cn()}var i}function Ki(t,e){return void 0!==(t.values||[]).find((t=>Gi(t,e)))}function Qi(t,e){if(t===e)return 0;const n=zi(t),i=zi(e);if(n!==i)return qn(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return qn(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Di(t.integerValue||t.doubleValue),i=Di(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Wi(t.timestampValue,e.timestampValue);case 4:return Wi(Pi(t),Pi(e));case 5:return $n(t.stringValue,e.stringValue);case 6:return function(t,e){const n=ki(t),i=ki(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=qn(n[r],i[r]);if(0!==t)return t}return qn(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=qn(Di(t.latitude),Di(e.latitude));return 0!==n?n:qn(Di(t.longitude),Di(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xi(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,r,s;const o=t.fields||{},a=e.fields||{},c=null===(n=o[Hi])||void 0===n?void 0:n.arrayValue,l=null===(i=a[Hi])||void 0===i?void 0:i.arrayValue,u=qn((null===(r=null==c?void 0:c.values)||void 0===r?void 0:r.length)||0,(null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Xi(c,l)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===qi&&e===qi)return 0;if(t===qi)return 1;if(e===qi)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=$n(i[o],s[o]);if(0!==t)return t;const e=Qi(n[i[o]],r[s[o]]);if(0!==e)return e}return qn(i.length,s.length)}(t.mapValue,e.mapValue);default:throw Cn()}}function Wi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return qn(t,e);const n=Ai(t),i=Ai(e),r=qn(n.seconds,i.seconds);return 0!==r?r:qn(n.nanos,i.nanos)}function Xi(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=Qi(n[r],i[r]);if(t)return t}return qn(n.length,i.length)}function Yi(t){return Ji(t)}function Ji(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Ai(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ki(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,ni.fromName(e).toString()):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Ji(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Ji(t.fields[r])}`;return n+"}"}(t.mapValue):Cn();var e}function Zi(t){switch(zi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ri(t);return e?16+Zi(e):16;case 5:return 2*t.stringValue.length;case 6:return ki(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce(((t,e)=>t+Zi(e)),0);case 10:case 11:return function(t){let e=0;return mi(t.fields,((t,n)=>{e+=t.length+Zi(n)})),e}(t.mapValue);default:throw Cn()}}function tr(t){return!!t&&"integerValue"in t}function er(t){return!!t&&"arrayValue"in t}function nr(t){return!!t&&"mapValue"in t}function ir(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return mi(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ir(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ir(t.arrayValue.values[n]);return e}return Object.assign({},t)}class rr{constructor(t){this.value=t}static empty(){return new rr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!nr(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ir(e)}setAll(t){let e=ei.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=ir(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());nr(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Gi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];nr(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){mi(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new rr(ir(this.value))}}function sr(t){const e=[];return mi(t.fields,((t,n)=>{const i=new ei([t]);if(nr(n)){const t=sr(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Ti(e)}class or{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new or(t,0,Xn.min(),Xn.min(),Xn.min(),rr.empty(),0)}static newFoundDocument(t,e,n,i){return new or(t,1,e,Xn.min(),n,i,0)}static newNoDocument(t,e){return new or(t,2,e,Xn.min(),Xn.min(),rr.empty(),0)}static newUnknownDocument(t,e){return new or(t,3,e,Xn.min(),Xn.min(),rr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Xn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof or&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ar{constructor(t,e){this.position=t,this.inclusive=e}}function cr(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?ni.comparator(ni.fromName(o.referenceValue),n.key):Qi(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function lr(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gi(t.position[n],e.position[n]))return!1;return!0}class ur{constructor(t,e="asc"){this.field=t,this.dir=e}}function hr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class dr{}class fr extends dr{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new br(t,e,n):"array-contains"===e?new Sr(t,n):"in"===e?new Ir(t,n):"not-in"===e?new Cr(t,n):"array-contains-any"===e?new Ar(t,n):new fr(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Er(t,n):new _r(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Qi(e,this.value)):null!==e&&zi(this.value)===zi(e)&&this.matchesComparison(Qi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Cn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends dr{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new pr(t,e)}matches(t){return gr(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function gr(t){return"and"===t.op}function mr(t){return function(t){for(const e of t.filters)if(e instanceof pr)return!1;return!0}(t)&&gr(t)}function yr(t){if(t instanceof fr)return t.field.canonicalString()+t.op.toString()+Yi(t.value);if(mr(t))return t.filters.map((t=>yr(t))).join(",");{const e=t.filters.map((t=>yr(t))).join(",");return`${t.op}(${e})`}}function vr(t,e){return t instanceof fr?(n=t,(i=e)instanceof fr&&n.op===i.op&&n.field.isEqual(i.field)&&Gi(n.value,i.value)):t instanceof pr?function(t,e){return e instanceof pr&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&vr(n,e.filters[i])),!0)}(t,e):void Cn();var n,i}function wr(t){return t instanceof fr?`${(e=t).field.canonicalString()} ${e.op} ${Yi(e.value)}`:t instanceof pr?function(t){return t.op.toString()+" {"+t.getFilters().map(wr).join(" ,")+"}"}(t):"Filter";var e}class br extends fr{constructor(t,e,n){super(t,e,n),this.key=ni.fromName(n.referenceValue)}matches(t){const e=ni.comparator(t.key,this.key);return this.matchesComparison(e)}}class Er extends fr{constructor(t,e){super(t,"in",e),this.keys=Tr(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class _r extends fr{constructor(t,e){super(t,"not-in",e),this.keys=Tr(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Tr(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>ni.fromName(t.referenceValue)))}class Sr extends fr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return er(e)&&Ki(e.arrayValue,this.value)}}class Ir extends fr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Ki(this.value.arrayValue,e)}}class Cr extends fr{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ki(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Ki(this.value.arrayValue,e)}}class Ar extends fr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!er(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Ki(this.value.arrayValue,t)))}}class Dr{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.le=null}}function kr(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Dr(t,e,n,i,r,s,o)}function Nr(t){const e=Dn(t);if(null===e.le){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>yr(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>{return(e=t).field.canonicalString()+e.dir;var e})).join(","),hi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Yi(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Yi(t))).join(",")),e.le=t}return e.le}function xr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vr(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lr(t.startAt,e.startAt)&&lr(t.endAt,e.endAt)}class Lr{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Mr(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Or(t){const e=Dn(t);if(null===e.he){e.he=[];const t=new Set;for(const i of e.explicitOrderBy)e.he.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(t){let e=new Ei(ei.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.he.push(new ur(i,n))})),t.has(ei.keyField().canonicalString())||e.he.push(new ur(ei.keyField(),n))}return e.he}function Rr(t){const e=Dn(t);return e.Pe||(e.Pe=function(t,e){if("F"===t.limitType)return kr(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new ur(t.field,e)}));const n=t.endAt?new ar(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ar(t.startAt.position,t.startAt.inclusive):null;return kr(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}(e,Or(t))),e.Pe}function Pr(t,e,n){return new Lr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vr(t,e){return xr(Rr(t),Rr(e))&&t.limitType===e.limitType}function Fr(t){return`${Nr(Rr(t))}|lt:${t.limitType}`}function Ur(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>wr(t))).join(", ")}]`),hi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>{return`${(e=t).field.canonicalString()} (${e.dir})`;var e})).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Yi(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Yi(t))).join(",")),`Target(${e})`}(Rr(t))}; limitType=${t.limitType})`}function Br(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ni.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Or(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&(i=e,!((n=t).startAt&&!function(t,e,n){const i=cr(t,e,n);return t.inclusive?i<=0:i<0}(n.startAt,Or(n),i)||n.endAt&&!function(t,e,n){const i=cr(t,e,n);return t.inclusive?i>=0:i>0}(n.endAt,Or(n),i)));var n,i}function jr(t,e,n){const i=t.field.isKeyField()?ni.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Qi(i,r):Cn()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Cn()}}class qr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){mi(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return yi(this.inner)}size(){return this.innerSize}}const $r=new vi(ni.comparator);function Hr(){return $r}const zr=new vi(ni.comparator);function Gr(...t){let e=zr;for(const n of t)e=e.insert(n.key,n);return e}function Kr(t){let e=zr;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Qr(){return Xr()}function Wr(){return Xr()}function Xr(){return new qr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Yr=new vi(ni.comparator),Jr=new Ei(ni.comparator);function Zr(...t){let e=Jr;for(const n of t)e=e.add(n);return e}const ts=new Ei(qn);function es(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:di(e)?"-0":e}}function ns(t){return{integerValue:""+t}}class is{constructor(){this._=void 0}}function rs(t,e,n){return t instanceof as?function(t,e){const n={fields:{[xi]:{stringValue:Ni},[Mi]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Oi(e)&&(e=Ri(e)),e&&(n.fields[Li]=e),{mapValue:n}}(n,e):t instanceof cs?ls(t,e):t instanceof us?hs(t,e):function(t,e){const n=os(t,e),i=fs(n)+fs(t.Ie);return tr(n)&&tr(t.Ie)?ns(i):es(t.serializer,i)}(t,e)}function ss(t,e,n){return t instanceof cs?ls(t,e):t instanceof us?hs(t,e):n}function os(t,e){return t instanceof ds?tr(n=e)||(i=n)&&"doubleValue"in i?e:{integerValue:0}:null;var n,i}class as extends is{}class cs extends is{constructor(t){super(),this.elements=t}}function ls(t,e){const n=ps(e);for(const i of t.elements)n.some((t=>Gi(t,i)))||n.push(i);return{arrayValue:{values:n}}}class us extends is{constructor(t){super(),this.elements=t}}function hs(t,e){let n=ps(e);for(const i of t.elements)n=n.filter((t=>!Gi(t,i)));return{arrayValue:{values:n}}}class ds extends is{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function fs(t){return Di(t.integerValue||t.doubleValue)}function ps(t){return er(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class gs{constructor(t,e){this.version=t,this.transformResults=e}}class ms{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ms}static exists(t){return new ms(void 0,t)}static updateTime(t){return new ms(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ys(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class vs{}function ws(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ks(t.key,ms.none()):new Ss(t.key,t.data,ms.none());{const n=t.data,i=rr.empty();let r=new Ei(ei.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Is(t.key,i,new Ti(r.toArray()),ms.none())}}function bs(t,e,n){var i;t instanceof Ss?function(t,e,n){const i=t.value.clone(),r=As(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Is?function(t,e,n){if(!ys(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=As(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Cs(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):(i=n,e.convertToNoDocument(i.version).setHasCommittedMutations())}function Es(t,e,n,i){return t instanceof Ss?function(t,e,n,i){if(!ys(t.precondition,e))return n;const r=t.value.clone(),s=Ds(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Is?function(t,e,n,i){if(!ys(t.precondition,e))return n;const r=Ds(t.fieldTransforms,i,e),s=e.data;return s.setAll(Cs(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):(r=e,s=n,ys(t.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):s);var r,s}function _s(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=os(i.transform,t||null);null!=r&&(null===n&&(n=rr.empty()),n.set(i.field,r))}return n||null}function Ts(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,i=e.fieldTransforms,!!(void 0===n&&void 0===i||n&&i&&Gn(n,i,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&(n=t.transform,i=e.transform,n instanceof cs&&i instanceof cs||n instanceof us&&i instanceof us?Gn(n.elements,i.elements,Gi):n instanceof ds&&i instanceof ds?Gi(n.Ie,i.Ie):n instanceof as&&i instanceof as);var n,i}(t,e))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask)));var n,i}class Ss extends vs{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Is extends vs{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Cs(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function As(t,e,n){const i=new Map;An(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,ss(o,a,n[r]))}return i}function Ds(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,rs(t,s,e))}return i}class ks extends vs{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ns extends vs{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xs{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&bs(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Es(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Es(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Wr();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=ws(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Xn.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Zr())}isEqual(t){return this.batchId===t.batchId&&Gn(this.mutations,t.mutations,((t,e)=>Ts(t,e)))&&Gn(this.baseMutations,t.baseMutations,((t,e)=>Ts(t,e)))}}class Ls{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){An(t.mutations.length===n.length);let i=Yr;const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Ls(t,e,n,i)}}class Ms{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var Os,Rs;(Rs=Os||(Os={}))[Rs.OK=0]="OK",Rs[Rs.CANCELLED=1]="CANCELLED",Rs[Rs.UNKNOWN=2]="UNKNOWN",Rs[Rs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rs[Rs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rs[Rs.NOT_FOUND=5]="NOT_FOUND",Rs[Rs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rs[Rs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rs[Rs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rs[Rs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rs[Rs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rs[Rs.ABORTED=10]="ABORTED",Rs[Rs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rs[Rs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rs[Rs.INTERNAL=13]="INTERNAL",Rs[Rs.UNAVAILABLE=14]="UNAVAILABLE",Rs[Rs.DATA_LOSS=15]="DATA_LOSS",new sn([4294967295,4294967295],0);class Ps{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Vs(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fs(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Us(t,e){return Vs(t,e.toTimestamp())}function Bs(t){return An(!!t),Xn.fromTimestamp(function(t){const e=Ai(t);return new Wn(e.seconds,e.nanos)}(t))}function js(t,e){return qs(t,e).canonicalString()}function qs(t,e){const n=(i=t,new Zn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function $s(t,e){return js(t.databaseId,e.path)}function Hs(t,e,n){return{name:$s(t,e),fields:n.value.mapValue.fields}}function zs(t){let e=function(t){const e=function(t){const e=Zn.fromString(t);return An(function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}(e)),e}(t);return 4===e.length?Zn.emptyPath():function(t){return An(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){An(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Gs(t);return e instanceof pr&&mr(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>{return new ur(Ks((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,hi(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new ar(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new ar(n,e)}(n.endAt)),function(t,e,n,i,r,s,o,a){return new Lr(t,e,n,i,r,"F",o,a)}(e,r,o,s,a,0,c,l)}function Gs(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Ks(t.unaryFilter.field);return fr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Ks(t.unaryFilter.field);return fr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ks(t.unaryFilter.field);return fr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ks(t.unaryFilter.field);return fr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Cn()}}(t):void 0!==t.fieldFilter?(e=t,fr.create(Ks(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Cn()}}(e.fieldFilter.op),e.fieldFilter.value)):void 0!==t.compositeFilter?function(t){return pr.create(t.compositeFilter.filters.map((t=>Gs(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Cn()}}(t.compositeFilter.op))}(t):Cn();var e}function Ks(t){return ei.fromServerFormat(t.fieldPath)}function Qs(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}class Ws{constructor(t){this.Tt=t}}function Xs(t){const e=zs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Pr(e,e.limit,"L"):e}class Ys{constructor(){this.Tn=new Js}addToCollectionParentIndex(t,e){return this.Tn.add(e),ci.resolve()}getCollectionParents(t,e){return ci.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return ci.resolve()}deleteFieldIndex(t,e){return ci.resolve()}deleteAllFieldIndexes(t){return ci.resolve()}createTargetIndexes(t,e){return ci.resolve()}getDocumentsMatchingTarget(t,e){return ci.resolve(null)}getIndexType(t,e){return ci.resolve(0)}getFieldIndexes(t,e){return ci.resolve([])}getNextCollectionGroupToUpdate(t){return ci.resolve(null)}getMinOffset(t,e){return ci.resolve(ri.min())}getMinOffsetFromCollectionGroup(t,e){return ci.resolve(ri.min())}updateCollectionGroup(t,e,n){return ci.resolve()}updateIndexEntries(t,e){return ci.resolve()}}class Js{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Ei(Zn.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Ei(Zn.comparator)).toArray()}}const Zs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},to=41943040;class eo{static withCacheSize(t){return new eo(t,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(to,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class no{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new no(0)}static Kn(){return new no(-1)}}const io="LruGarbageCollector";function ro([t,e],[n,i]){const r=qn(t,n);return 0===r?qn(e,i):r}class so{constructor(t){this.Hn=t,this.buffer=new Ei(ro),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();ro(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class oo{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(t){_n(io,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){li(t)?_n(io,"Ignoring IndexedDB error during garbage collection: ",t):await ai(t)}await this.er(3e5)}))}}class ao{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return ci.resolve(ui.ae);const n=new so(e);return this.tr.forEachTarget(t,(t=>n.Zn(t.sequenceNumber))).next((()=>this.tr.rr(t,(t=>n.Zn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.tr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(_n("LruGarbageCollector","Garbage collection skipped; disabled"),ci.resolve(Zs)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(_n("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zs):this.ir(t,e)))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let n,i,r,s,o,a,c;const l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(_n("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,o=Date.now(),this.removeTargets(t,n,e)))).next((e=>(r=e,a=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(c=Date.now(),En()<=L.DEBUG&&_n("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${i} in `+(o-s)+`ms\n\tRemoved ${r} targets in `+(a-o)+`ms\n\tRemoved ${t} documents in `+(c-a)+`ms\nTotal Duration: ${c-l}ms`),ci.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t}))))}}class co{constructor(){this.changes=new qr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,or.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?ci.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class lo{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class uo{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Es(n.mutation,t,Ti.empty(),Wn.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Zr()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Zr()){const i=Qr();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Gr();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Qr();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Zr())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Hr();const s=Xr(),o=Xr();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof Is)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Es(o.mutation,e,o.mutation.getFieldMask(),Wn.now())):s.set(e.key,Ti.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new lo(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Xr();let i=new vi(((t,e)=>t-e)),r=Zr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ti.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Zr()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Wr();c.forEach((t=>{if(!r.has(t)){const i=ws(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return ci.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return r=e,ni.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i);var r}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):ci.resolve(Qr());let o=-1,a=r;return s.next((e=>ci.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?ci.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Zr()))).next((t=>({batchId:o,changes:Kr(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ni(e)).next((t=>{let e=Gr();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Gr();return this.indexManager.getCollectionParents(t,r).next((o=>ci.forEach(o,(o=>{const a=(c=e,l=o.child(r),new Lr(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,or.newInvalidDocument(i)))}));let n=Gr();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&Es(s.mutation,i,Ti.empty(),Wn.now()),Br(e,i)&&(n=n.insert(t,i))})),n}))}}class ho{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return ci.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,{id:(n=e).id,version:n.version,createTime:Bs(n.createTime)}),ci.resolve();var n}getNamedQuery(t,e){return ci.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,{name:(n=e).name,query:Xs(n.bundledQuery),readTime:Bs(n.readTime)}),ci.resolve();var n}}class fo{constructor(){this.overlays=new vi(ni.comparator),this.Rr=new Map}getOverlay(t,e){return ci.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Qr();return ci.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.Et(t,e,i)})),ci.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.Rr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.Rr.delete(n)),ci.resolve()}getOverlaysForCollection(t,e,n){const i=Qr(),r=e.length+1,s=new ni(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return ci.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new vi(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Qr(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Qr(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return ci.resolve(o)}Et(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.Rr.get(i.largestBatchId).delete(n.key);this.Rr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Ms(e,n));let r=this.Rr.get(e);void 0===r&&(r=Zr(),this.Rr.set(e,r)),this.Rr.set(e,r.add(n.key))}}class po{constructor(){this.sessionToken=Ii.EMPTY_BYTE_STRING}getSessionToken(t){return ci.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ci.resolve()}}class go{constructor(){this.Vr=new Ei(mo.mr),this.gr=new Ei(mo.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const n=new mo(t,e);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.wr(new mo(t,e))}Sr(t,e){t.forEach((t=>this.removeReference(t,e)))}br(t){const e=new ni(new Zn([])),n=new mo(e,t),i=new mo(e,t+1),r=[];return this.gr.forEachInRange([n,i],(t=>{this.wr(t),r.push(t.key)})),r}Dr(){this.Vr.forEach((t=>this.wr(t)))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new ni(new Zn([])),n=new mo(e,t),i=new mo(e,t+1);let r=Zr();return this.gr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new mo(t,0),n=this.Vr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class mo{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return ni.comparator(t.key,e.key)||qn(t.Cr,e.Cr)}static pr(t,e){return qn(t.Cr,e.Cr)||ni.comparator(t.key,e.key)}}class yo{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Ei(mo.mr)}checkEmpty(t){return ci.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new xs(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.Mr=this.Mr.add(new mo(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return ci.resolve(s)}lookupMutationBatch(t,e){return ci.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Nr(n),r=i<0?0:i;return ci.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ci.resolve(0===this.mutationQueue.length?-1:this.Fr-1)}getAllMutationBatches(t){return ci.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new mo(e,0),i=new mo(e,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([n,i],(t=>{const e=this.Or(t.Cr);r.push(e)})),ci.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ei(qn);return e.forEach((t=>{const e=new mo(t,0),i=new mo(t,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([e,i],(t=>{n=n.add(t.Cr)}))})),ci.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;ni.isDocumentKey(r)||(r=r.child(""));const s=new mo(new ni(r),0);let o=new Ei(qn);return this.Mr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.Cr)),!0)}),s),ci.resolve(this.Br(o))}Br(t){const e=[];return t.forEach((t=>{const n=this.Or(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){An(0===this.Lr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return ci.forEach(e.mutations,(i=>{const r=new mo(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Mr=n}))}qn(t){}containsKey(t,e){const n=new mo(e,0),i=this.Mr.firstAfterOrEqual(n);return ci.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ci.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class vo{constructor(t){this.kr=t,this.docs=new vi(ni.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.kr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return ci.resolve(n?n.document.mutableCopy():or.newInvalidDocument(e))}getEntries(t,e){let n=Hr();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():or.newInvalidDocument(t))})),ci.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Hr();const s=e.path,o=new ni(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||si(ii(o),n)<=0||(i.has(o.key)||Br(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return ci.resolve(r)}getAllFromCollectionGroup(t,e,n,i){Cn()}qr(t,e){return ci.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new wo(this)}getSize(t){return ci.resolve(this.size)}}class wo extends co{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.Ir.addEntry(t,i)):this.Ir.removeEntry(n)})),ci.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}class bo{constructor(t){this.persistence=t,this.Qr=new qr((t=>Nr(t)),xr),this.lastRemoteSnapshotVersion=Xn.min(),this.highestTargetId=0,this.$r=0,this.Ur=new go,this.targetCount=0,this.Kr=no.Un()}forEachTarget(t,e){return this.Qr.forEach(((t,n)=>e(n))),ci.resolve()}getLastRemoteSnapshotVersion(t){return ci.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ci.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),ci.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.$r&&(this.$r=e),ci.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new no(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,ci.resolve()}updateTargetData(t,e){return this.zn(e),ci.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,ci.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Qr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),ci.waitFor(r).next((()=>i))}getTargetCount(t){return ci.resolve(this.targetCount)}getTargetData(t,e){const n=this.Qr.get(e)||null;return ci.resolve(n)}addMatchingKeys(t,e,n){return this.Ur.yr(e,n),ci.resolve()}removeMatchingKeys(t,e,n){this.Ur.Sr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),ci.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),ci.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Ur.vr(e);return ci.resolve(n)}containsKey(t,e){return ci.resolve(this.Ur.containsKey(e))}}class Eo{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new ui(0),this.zr=!1,this.zr=!0,this.jr=new po,this.referenceDelegate=t(this),this.Hr=new bo(this),this.indexManager=new Ys,this.remoteDocumentCache=new vo((t=>this.referenceDelegate.Jr(t))),this.serializer=new Ws(e),this.Yr=new ho(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new fo,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Wr[t.toKey()];return n||(n=new yo(e,this.referenceDelegate),this.Wr[t.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,n){_n("MemoryPersistence","Starting transaction:",t);const i=new _o(this.Gr.next());return this.referenceDelegate.Zr(),n(i).next((t=>this.referenceDelegate.Xr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}ei(t,e){return ci.or(Object.values(this.Wr).map((n=>()=>n.containsKey(t,e))))}}class _o extends oi{constructor(t){super(),this.currentSequenceNumber=t}}class To{constructor(t){this.persistence=t,this.ti=new go,this.ni=null}static ri(t){return new To(t)}get ii(){if(this.ni)return this.ni;throw Cn()}addReference(t,e,n){return this.ti.addReference(n,e),this.ii.delete(n.toString()),ci.resolve()}removeReference(t,e,n){return this.ti.removeReference(n,e),this.ii.add(n.toString()),ci.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),ci.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach((t=>this.ii.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.ii.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ci.forEach(this.ii,(n=>{const i=ni.fromPath(n);return this.si(t,i).next((t=>{t||e.removeEntry(i,Xn.min())}))})).next((()=>(this.ni=null,e.apply(t))))}updateLimboDocument(t,e){return this.si(t,e).next((t=>{t?this.ii.delete(e.toString()):this.ii.add(e.toString())}))}Jr(t){return 0}si(t,e){return ci.or([()=>ci.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class So{constructor(t,e){this.persistence=t,this.oi=new qr((t=>function(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pi(e)),e=fi(t.get(n),e);return pi(e)}(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=function(t,e){return new ao(t,e)}(this,e)}static ri(t,e){return new So(t,e)}Zr(){}Xr(t){return ci.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}sr(t){let e=0;return this.rr(t,(t=>{e++})).next((()=>e))}rr(t,e){return ci.forEach(this.oi,((n,i)=>this.ar(t,n,i).next((t=>t?ci.resolve():e(i)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.qr(t,(i=>this.ar(t,i,e).next((t=>{t||(n++,r.removeEntry(i,Xn.min()))})))).next((()=>r.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),ci.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.oi.set(n,t.currentSequenceNumber),ci.resolve()}removeReference(t,e,n){return this.oi.set(n,t.currentSequenceNumber),ci.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),ci.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Zi(t.data.value)),e}ar(t,e,n){return ci.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.oi.get(e);return ci.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Io{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=i}static Yi(t,e){let n=Zr(),i=Zr();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Io(t,e.fromCache,n,i)}}class Co{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Ao{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=!function(){var t;const e=null===(t=m())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(){const t=("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"").match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}()>0?6:4}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.rs(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.ss(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new Co;return this._s(t,e,n).next((i=>{if(r.result=i,this.Xi)return this.us(t,e,n,i.size)}))})).next((()=>r.result))}us(t,e,n,i){return n.documentReadCount<this.es?(En()<=L.DEBUG&&_n("QueryEngine","SDK will not create cache indexes for query:",Ur(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ci.resolve()):(En()<=L.DEBUG&&_n("QueryEngine","Query:",Ur(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ts*i?(En()<=L.DEBUG&&_n("QueryEngine","The SDK decides to create cache indexes for query:",Ur(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Rr(e))):ci.resolve())}rs(t,e){if(Mr(e))return ci.resolve(null);let n=Rr(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=Pr(e,null,"F"),n=Rr(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Zr(...i);return this.ns.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.cs(e,i);return this.ls(e,s,r,n.readTime)?this.rs(t,Pr(e,null,"F")):this.hs(t,s,e,n)}))))})))))}ss(t,e,n,i){return Mr(e)||i.isEqual(Xn.min())?ci.resolve(null):this.ns.getDocuments(t,n).next((r=>{const s=this.cs(e,r);return this.ls(e,s,n,i)?ci.resolve(null):(En()<=L.DEBUG&&_n("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ur(e)),this.hs(t,s,e,function(t){const e=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Xn.fromTimestamp(1e9===n?new Wn(e+1,0):new Wn(e,n));return new ri(i,ni.empty(),-1)}(i)).next((t=>t)))}))}cs(t,e){let n=new Ei(function(t){return(e,n)=>{let i=!1;for(const r of Or(t)){const t=jr(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}(t));return e.forEach(((e,i)=>{Br(t,i)&&(n=n.add(i))})),n}ls(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}_s(t,e,n){return En()<=L.DEBUG&&_n("QueryEngine","Using full collection scan to execute query:",Ur(e)),this.ns.getDocumentsMatchingQuery(t,e,ri.min(),n)}hs(t,e,n,i){return this.ns.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Do{constructor(t,e,n,i){this.persistence=t,this.Ps=e,this.serializer=i,this.Ts=new vi(qn),this.Is=new qr((t=>Nr(t)),xr),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(n)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new uo(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ts)))}}async function ko(t,e){const n=Dn(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.As(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Zr();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({Rs:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function No(t,e){const n=Dn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}class xo{constructor(){this.activeTargetIds=ts}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Lo{constructor(){this.ho=new xo,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,n){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new xo,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Mo{To(t){}shutdown(){}}const Oo="ConnectivityMonitor";class Ro{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){_n(Oo,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){_n(Oo,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Po=null;function Vo(){return null===Po?Po=268435456+Math.round(2147483648*Math.random()):Po++,"0x"+Po.toString(16)}const Fo="RestConnection",Uo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bo{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${n}/databases/${i}`,this.wo=this.databaseId.database===Fi?`project_id=${n}`:`project_id=${n}&database_id=${i}`}So(t,e,n,i,r){const s=Vo(),o=this.bo(t,e.toUriEncodedString());_n(Fo,`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,i,r),this.vo(t,o,a,n).then((e=>(_n(Fo,`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw Sn(Fo,`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Co(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+wn,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Uo[t];return`${this.po}/v1/${e}:${n}`}terminate(){}}class jo{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}const qo="WebChannelConnection";class $o extends Bo{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,n,i){const r=Vo();return new Promise(((s,o)=>{const a=new an;a.setWithCredentials(!0),a.listenOnce(ln.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case un.NO_ERROR:const e=a.getResponseJson();_n(qo,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case un.TIMEOUT:_n(qo,`RPC '${t}' ${r} timed out`),o(new Nn(kn.DEADLINE_EXCEEDED,"Request time out"));break;case un.HTTP_ERROR:const n=a.getStatus();if(_n(qo,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(kn).indexOf(e)>=0?e:kn.UNKNOWN}(e.status);o(new Nn(t,e.message))}else o(new Nn(kn.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Nn(kn.UNAVAILABLE,"Connection failed."));break;default:Cn()}}finally{_n(qo,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);_n(qo,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Wo(t,e,n){const i=Vo(),r=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=pn(),o=fn(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");_n(qo,`Creating RPC '${t}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new jo({Fo:e=>{d?_n(qo,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(_n(qo,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),_n(qo,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},Mo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,cn.EventType.OPEN,(()=>{d||(_n(qo,`RPC '${t}' stream ${i} transport opened.`),f.Qo())})),p(u,cn.EventType.CLOSE,(()=>{d||(d=!0,_n(qo,`RPC '${t}' stream ${i} transport closed`),f.Uo())})),p(u,cn.EventType.ERROR,(e=>{d||(d=!0,Sn(qo,`RPC '${t}' stream ${i} transport errored:`,e),f.Uo(new Nn(kn.UNAVAILABLE,"The operation could not be completed")))})),p(u,cn.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];An(!!r);const s=r,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){_n(qo,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=Os[t];if(void 0!==e)return function(t){if(void 0===t)return Tn("GRPC error has no .code"),kn.UNKNOWN;switch(t){case Os.OK:return kn.OK;case Os.CANCELLED:return kn.CANCELLED;case Os.UNKNOWN:return kn.UNKNOWN;case Os.DEADLINE_EXCEEDED:return kn.DEADLINE_EXCEEDED;case Os.RESOURCE_EXHAUSTED:return kn.RESOURCE_EXHAUSTED;case Os.INTERNAL:return kn.INTERNAL;case Os.UNAVAILABLE:return kn.UNAVAILABLE;case Os.UNAUTHENTICATED:return kn.UNAUTHENTICATED;case Os.INVALID_ARGUMENT:return kn.INVALID_ARGUMENT;case Os.NOT_FOUND:return kn.NOT_FOUND;case Os.ALREADY_EXISTS:return kn.ALREADY_EXISTS;case Os.PERMISSION_DENIED:return kn.PERMISSION_DENIED;case Os.FAILED_PRECONDITION:return kn.FAILED_PRECONDITION;case Os.ABORTED:return kn.ABORTED;case Os.OUT_OF_RANGE:return kn.OUT_OF_RANGE;case Os.UNIMPLEMENTED:return kn.UNIMPLEMENTED;case Os.DATA_LOSS:return kn.DATA_LOSS;default:return Cn()}}(e)}(e),r=o.message;void 0===n&&(n=kn.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.Uo(new Nn(n,r)),u.close()}else _n(qo,`RPC '${t}' stream ${i} received:`,r),f.Ko(r)}})),p(o,dn.STAT_EVENT,(e=>{e.stat===hn.PROXY?_n(qo,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===hn.NOPROXY&&_n(qo,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function Ho(){return"undefined"!=typeof document?document:null}function zo(t){return new Ps(t,!0)}class Go{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Ti=t,this.timerId=e,this.Go=n,this.zo=i,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),i=Math.max(0,e-n);i>0&&_n("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,(()=>(this.Yo=Date.now(),t()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const Ko="PersistentStream";class Qo{constructor(t,e,n,i,r,s,o,a){this.Ti=t,this.n_=n,this.r_=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Go(t,e)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==t?this.a_.reset():e&&e.code===kn.RESOURCE_EXHAUSTED?(Tn(e.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===kn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.i_===e&&this.V_(t,n)}),(e=>{t((()=>{const t=new Nn(kn.UNKNOWN,"Fetching auth token failed: "+e.message);return this.m_(t)}))}))}V_(t,e){const n=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((t=>{n((()=>this.m_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.__?this.g_(t):this.onNext(t)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(t){return _n(Ko,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget((()=>this.i_===t?e():(_n(Ko,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wo extends Qo{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return An(!!t.streamToken),this.lastStreamToken=t.streamToken,An(!t.writeResults||0===t.writeResults.length),this.listener.D_()}onNext(t){An(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=function(t,e){return t&&t.length>0?(An(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Bs(t.updateTime):Bs(e);return n.isEqual(Xn.min())&&(n=Bs(e)),new gs(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Bs(t.commitTime);return this.listener.v_(n,e)}C_(){const t={};t.database=function(t){return new Zn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Ss)n={update:Hs(t,e.key,e.value)};else if(e instanceof ks)n={delete:$s(t,e.key)};else if(e instanceof Is)n={update:Hs(t,e.key,e.data),updateMask:Qs(e.fieldMask)};else{if(!(e instanceof Ns))return Cn();n={verify:$s(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof as)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof cs)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof us)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ds)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw Cn()}(0,t)))),e.precondition.isNone||(n.currentDocument=(i=t,void 0!==(r=e.precondition).updateTime?{updateTime:Us(i,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Cn())),n;var i,r}(this.serializer,t)))};this.I_(e)}}class Xo{}class Yo extends Xo{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Nn(kn.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,qs(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===kn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Nn(kn.UNKNOWN,t.toString())}))}Co(t,e,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Co(t,qs(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===kn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Nn(kn.UNKNOWN,t.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Jo{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(t){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,"Online"===t&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Tn(e),this.N_=!1):_n("OnlineStateTracker",e)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Zo="RemoteStore";class ta{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To((t=>{n.enqueueAndForget((async()=>{ia(this)&&(_n(Zo,"Restarting streams for network reachability change."),await async function(t){const e=Dn(t);e.W_.add(4),await na(e),e.j_.set("Unknown"),e.W_.delete(4),await ea(e)}(this))}))})),this.j_=new Jo(n,i)}}async function ea(t){if(ia(t))for(const e of t.G_)await e(!0)}async function na(t){for(const e of t.G_)await e(!1)}function ia(t){return 0===Dn(t).W_.size}async function ra(t,e,n){if(!li(e))throw e;t.W_.add(1),await na(t),t.j_.set("Offline"),n||(n=()=>function(t){const e=Dn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Hr.getLastRemoteSnapshotVersion(t)))}(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{_n(Zo,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await ea(t)}))}function sa(t,e){return e().catch((n=>ra(t,n,e)))}async function oa(t){const e=Dn(t),n=ma(e);let i=e.U_.length>0?e.U_[e.U_.length-1].batchId:-1;for(;aa(e);)try{const t=await No(e.localStore,i);if(null===t){0===e.U_.length&&n.P_();break}i=t.batchId,ca(e,t)}catch(r){await ra(e,r)}la(e)&&ua(e)}function aa(t){return ia(t)&&t.U_.length<10}function ca(t,e){t.U_.push(e);const n=ma(t);n.c_()&&n.S_&&n.b_(e.mutations)}function la(t){return ia(t)&&!ma(t).u_()&&t.U_.length>0}function ua(t){ma(t).start()}async function ha(t){ma(t).C_()}async function da(t){const e=ma(t);for(const n of t.U_)e.b_(n.mutations)}async function fa(t,e,n){const i=t.U_.shift(),r=Ls.from(i,e,n);await sa(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await oa(t)}async function pa(t,e){e&&ma(t).S_&&await async function(t,e){if(function(t){switch(t){case kn.OK:return Cn();case kn.CANCELLED:case kn.UNKNOWN:case kn.DEADLINE_EXCEEDED:case kn.RESOURCE_EXHAUSTED:case kn.INTERNAL:case kn.UNAVAILABLE:case kn.UNAUTHENTICATED:return!1;case kn.INVALID_ARGUMENT:case kn.NOT_FOUND:case kn.ALREADY_EXISTS:case kn.PERMISSION_DENIED:case kn.FAILED_PRECONDITION:case kn.ABORTED:case kn.OUT_OF_RANGE:case kn.UNIMPLEMENTED:case kn.DATA_LOSS:return!0;default:return Cn()}}(n=e.code)&&n!==kn.ABORTED){const n=t.U_.shift();ma(t).h_(),await sa(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await oa(t)}var n}(t,e),la(t)&&ua(t)}async function ga(t,e){const n=Dn(t);n.asyncQueue.verifyOperationInProgress(),_n(Zo,"RemoteStore received new credentials");const i=ia(n);n.W_.add(3),await na(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await ea(n)}function ma(t){return t.Y_||(t.Y_=function(t,e,n){const i=Dn(t);return i.M_(),new Wo(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:ha.bind(null,t),Lo:pa.bind(null,t),D_:da.bind(null,t),v_:fa.bind(null,t)}),t.G_.push((async e=>{e?(t.Y_.h_(),await oa(t)):(await t.Y_.stop(),t.U_.length>0&&(_n(Zo,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))}))),t.Y_}class ya{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new ya(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nn(kn.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function va(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),li(t))return new Nn(kn.UNAVAILABLE,`${e}: ${t}`);throw t}class wa{constructor(){this.queries=ba(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(t,e){const n=Dn(t),i=n.queries;n.queries=ba(),i.forEach(((t,n)=>{for(const i of n.ta)i.onError(e)}))}(this,new Nn(kn.ABORTED,"Firestore shutting down"))}}function ba(){return new qr((t=>Fr(t)),Vr)}var Ea,_a;(_a=Ea||(Ea={}))._a="default",_a.Cache="cache";class Ta{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new qr((t=>Fr(t)),Vr),this.qa=new Map,this.Qa=new Set,this.$a=new vi(ni.comparator),this.Ua=new Map,this.Ka=new go,this.Wa={},this.Ga=new Map,this.za=no.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Sa(t,e,n){const i=function(t){const e=Dn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ca.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Aa.bind(null,e),e}(t);try{const t=await function(t,e){const n=Dn(t),i=Wn.now(),r=e.reduce(((t,e)=>t.add(e.key)),Zr());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Hr(),c=Zr();return n.ds.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=_s(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Is(t.key,e,sr(e.value.mapValue),ms.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Kr(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Wa[t.currentUser.toKey()];i||(i=new vi(qn)),i=i.insert(e,n),t.Wa[t.currentUser.toKey()]=i}(i,t.batchId,n),await Na(i,t.changes),await oa(i.remoteStore)}catch(r){const t=va(r,"Failed to persist write");n.reject(t)}}function Ia(t,e,n){const i=Dn(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ka.forEach(((n,i)=>{const r=i.view.sa(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Dn(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.ta)r.sa(e)&&(i=!0)})),i&&function(t){t.ia.forEach((t=>{t.next()}))}(n)}(i.eventManager,e),t.length&&i.La.p_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Ca(t,e){const n=Dn(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Dn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.ds.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=ci.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);An(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Zr();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(n.localStore,e);ka(n,i,null),Da(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Na(n,t)}catch(r){await ai(r)}}async function Aa(t,e,n){const i=Dn(t);try{const t=await function(t,e){const n=Dn(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(An(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);ka(i,e,n),Da(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Na(i,t)}catch(r){await ai(r)}}function Da(t,e){(t.Ga.get(e)||[]).forEach((t=>{t.resolve()})),t.Ga.delete(e)}function ka(t,e,n){const i=Dn(t);let r=i.Wa[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Wa[i.currentUser.toKey()]=r}}async function Na(t,e,n){const i=Dn(t),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach(((t,a)=>{o.push(i.Ha(a,e,n).then((t=>{var e;if((t||n)&&i.isPrimaryClient){const r=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(t){r.push(t);const e=Io.Yi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.La.p_(r),await async function(t,e){const n=Dn(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>ci.forEach(e,(e=>ci.forEach(e.Hi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>ci.forEach(e.Ji,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(i){if(!li(i))throw i;_n("LocalStore","Failed to update sequence numbers: "+i)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.Ts.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Ts=n.Ts.insert(t,r)}}}(i.localStore,s))}async function xa(t,e){const n=Dn(t);if(!n.currentUser.isEqual(e)){_n("SyncEngine","User change. New user:",e.toKey());const t=await ko(n.localStore,e);n.currentUser=e,(i=n).Ga.forEach((t=>{t.forEach((t=>{t.reject(new Nn(kn.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),i.Ga.clear(),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Na(n,t.Rs)}var i}class La{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=zo(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return function(t,e,n,i){return new Do(t,e,n,i)}(this.persistence,new Ao,t.initialUser,this.serializer)}Xa(t){return new Eo(To.ri,this.serializer)}Za(t){return new Lo}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}La.provider={build:()=>new La};class Ma extends La{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){An(this.persistence.referenceDelegate instanceof So);const n=this.persistence.referenceDelegate.garbageCollector;return new oo(n,t.asyncQueue,e)}Xa(t){const e=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new Eo((t=>So.ri(t,e)),this.serializer)}}class Oa{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Ia(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=xa.bind(null,this.syncEngine),await async function(t,e){const n=Dn(t);e?(n.W_.delete(2),await ea(n)):e||(n.W_.add(2),await na(n),n.j_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new wa}createDatastore(t){const e=zo(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new $o(i));var i;return function(t,e,n,i){return new Yo(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>Ia(this.syncEngine,t,0),s=Ro.D()?new Ro:new Mo,new ta(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Ta(t,e,n,i,r,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=Dn(t);_n(Zo,"RemoteStore shutting down."),e.W_.add(5),await na(e),e.z_.shutdown(),e.j_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}Oa.provider={build:()=>new Oa};const Ra="FirestoreClient";class Pa{constructor(t,e,n,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=vn.UNAUTHENTICATED,this.clientId=jn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async t=>{_n(Ra,"Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(_n(Ra,"Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=va(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Va(t,e){t.asyncQueue.verifyOperationInProgress(),_n(Ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await ko(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Fa(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_n(Ra,"Using user provided OfflineComponentProvider");try{await Va(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!("FirebaseError"===(n=r).name?n.code===kn.FAILED_PRECONDITION||n.code===kn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw r;Sn("Error using user provided cache. Falling back to memory cache: "+r),await Va(t,new La)}}else _n(Ra,"Using default OfflineComponentProvider"),await Va(t,new Ma(void 0));var n;return t._offlineComponents}(t);_n(Ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>ga(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>ga(e.remoteStore,n))),t._onlineComponents=e}function Ua(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Ba=new Map;function ja(t,e,n){if(!n)throw new Nn(kn.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qa(t){if(!ni.isDocumentKey(t))throw new Nn(kn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $a(t){if(ni.isDocumentKey(t))throw new Nn(kn.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ha(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const n=(e=t).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var e;return"function"==typeof t?"a function":Cn()}function za(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Nn(kn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ha(t);throw new Nn(kn.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}const Ga="firestore.googleapis.com",Ka=!0;class Qa{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Nn(kn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ga,this.ssl=Ka}else this.host=t.host,this.ssl=null!==(e=t.ssl)&&void 0!==e?e:Ka;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=to;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Nn(kn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new Nn(kn.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ua(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Nn(kn.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Nn(kn.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Nn(kn.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class Wa{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qa({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Nn(kn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Nn(kn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qa(t),this._emulatorOptions=t.emulatorOptions||{},void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Mn;switch(t.type){case"firstParty":return new Vn(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Nn(kn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Ba.get(t);e&&(_n("ComponentProvider","Removing Datastore"),Ba.delete(t),e.terminate())}(this),Promise.resolve()}}class Xa{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Xa(this.firestore,t,this._query)}}class Ya{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ya(this.firestore,t,this._key)}}class Ja extends Xa{constructor(t,e,n){super(t,e,function(t){return new Lr(t)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ya(this.firestore,null,new ni(t))}withConverter(t){return new Ja(this.firestore,t,this._path)}}const Za="AsyncQueue";class tc{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Go(this,"async_queue_retry"),this.Su=()=>{const t=Ho();t&&_n(Za,"Visibility state changed to "+t.visibilityState),this.a_.t_()},this.bu=t;const e=Ho();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Ho();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise((()=>{}));const e=new xn;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Vu.push(t),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!li(t))throw t;_n(Za,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(t){const e=this.bu.then((()=>(this.pu=!0,t().catch((t=>{throw this.gu=t,this.pu=!1,Tn("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((t=>(this.pu=!1,t))))));return this.bu=e,e}enqueueAfterDelay(t,e,n){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const i=ya.createAndSchedule(this,t,e,n,(t=>this.Fu(t)));return this.fu.push(i),i}Du(){this.gu&&Cn()}verifyOperationInProgress(){}async Mu(){let t;do{t=this.bu,await t}while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then((()=>{this.fu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.fu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Mu()}))}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class ec extends Wa{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new tc,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new tc(t),this._firestoreClient=void 0,await t}}}class nc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new nc(Ii.fromBase64String(t))}catch(e){throw new Nn(kn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new nc(Ii.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ic{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Nn(kn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ei(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class rc{constructor(t){this._methodName=t}}class sc{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Nn(kn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Nn(kn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return qn(this._lat,t._lat)||qn(this._long,t._long)}}class oc{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}const ac=/^__.*__$/;class cc{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Is(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ss(t,this.data,e,this.fieldTransforms)}}function lc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Cn()}}class uc{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new uc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ku({path:n,Qu:!1});return i.$u(t),i}Uu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ku({path:n,Qu:!1});return i.Bu(),i}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return bc(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(0===t.length)throw this.Wu("Document fields must not be empty");if(lc(this.Lu)&&ac.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class hc{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||zo(t)}ju(t,e,n,i=!1){return new uc({Lu:t,methodName:e,zu:n,path:ei.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dc(t){const e=t._freezeSettings(),n=zo(t._databaseId);return new hc(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fc(t,e,n,i,r,s={}){const o=t.ju(s.merge||s.mergeFields?2:0,e,n,r);yc("Data must be an object, but it was:",o,i);const a=gc(i,o);let c,l;if(s.merge)c=new Ti(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=vc(e,i,n);if(!o.contains(r))throw new Nn(kn.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Ec(t,r)||t.push(r)}c=new Ti(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new cc(new rr(a),c,l)}function pc(t,e){if(mc(t=A(t)))return yc("Unsupported field value:",e,t),gc(t,e);if(t instanceof rc)return function(t,e){if(!lc(e.Lu))throw e.Wu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Wu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&4!==e.Lu)throw e.Wu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=pc(r,e.Ku(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=A(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return function(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!di(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ns(e):es(t,e)}(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Wn.fromDate(t);return{timestampValue:Vs(e.serializer,n)}}if(t instanceof Wn){const n=new Wn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vs(e.serializer,n)}}if(t instanceof sc)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nc)return{bytesValue:Fs(e.serializer,t._byteString)};if(t instanceof Ya){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Wu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:js(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof oc)return n=t,i=e,{mapValue:{fields:{[Bi]:{stringValue:$i},[Hi]:{arrayValue:{values:n.toArray().map((t=>{if("number"!=typeof t)throw i.Wu("VectorValues must only contain numeric values.");return es(i.serializer,t)}))}}}}};var n,i;throw e.Wu(`Unsupported field value: ${Ha(t)}`)}(t,e)}function gc(t,e){const n={};return yi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mi(t,((t,i)=>{const r=pc(i,e.qu(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function mc(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wn||t instanceof sc||t instanceof nc||t instanceof Ya||t instanceof rc||t instanceof oc)}function yc(t,e,n){if(!mc(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Ha(n);throw"an object"===i?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}var i}function vc(t,e,n){if((e=A(e))instanceof ic)return e._internalPath;if("string"==typeof e)return function(t,e,n){if(e.search(wc)>=0)throw bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ic(...e.split("."))._internalPath}catch(i){throw bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e);throw bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const wc=new RegExp("[~\\*/\\[\\]]");function bc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Nn(kn.INVALID_ARGUMENT,a+t+c)}function Ec(t,e){return t.some((t=>t.isEqual(e)))}function _c(t,e){const n=za(t.firestore,ec),i=function(t,e,...n){if(t=A(t),1===arguments.length&&(e=jn.newId()),ja("doc","path",e),t instanceof Wa){const i=Zn.fromString(e,...n);return qa(i),new Ya(t,null,new ni(i))}{if(!(t instanceof Ya||t instanceof Ja))throw new Nn(kn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Zn.fromString(e,...n));return qa(i),new Ya(t.firestore,t instanceof Ja?t.converter:null,new ni(i))}}(t),r=function(t,e){let n;return n=t?t.toFirestore(e):e,n}(t.converter,e);return function(t,e){return function(t,e){const n=new xn;return t.asyncQueue.enqueueAndForget((async()=>Sa(await function(t){return async function(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_n(Ra,"Using user provided OnlineComponentProvider"),await Fa(t,t._uninitializedComponentsProvider._online)):(_n(Ra,"Using default OnlineComponentProvider"),await Fa(t,new Oa))),t._onlineComponents}(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(function(t){if(t._terminated)throw new Nn(kn.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function(t){var e,n,i;const r=t._freezeSettings(),s=(o=t._databaseId,a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",c=t._persistenceKey,new Vi(o,a,c,(l=r).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Ua(l.experimentalLongPollingOptions),l.useFetchStreams));var o,a,c,l;t._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Pa(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}(t),t._firestoreClient}(t),e)}(n,[fc(dc(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,ms.exists(!1))]).then((()=>i))}!function(t,e=!0){wn="11.5.0",Ft(new D("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new ec(new Rn(t.getProvider("auth-internal")),new Un(r,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Nn(kn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ui(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Ht(mn,yn,t),Ht(mn,yn,"esm2017")}();const Tc=qt({apiKey:"AIzaSyAr_cNUJ67TIWd4gC7CPb4MnwJQJBKp32c",authDomain:"bizinformatica.firebaseapp.com",projectId:"bizinformatica",storageBucket:"bizinformatica.firebasestorage.app",messagingSenderId:"149697813785",appId:"1:149697813785:web:9645ee0c2a1d9325597988",measurementId:"G-M8BF9CXEQF"}),Sc=function(){const t=$t(),e=Fi,n=Ut(t,"firestore").getImmediate({identifier:e});if(!n._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=m())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})("firestore");t&&function(t,e,n,i={}){var r;const s=(t=za(t,Wa))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;s.host!==Ga&&s.host!==a&&Sn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:i});if(!S(c,o)&&(t._setSettings(c),i.mockUserToken)){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=vn.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[g(JSON.stringify({alg:"none",type:"JWT"})),g(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Nn(kn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new vn(s)}t._authCredentials=new On(new Ln(e,n))}}(n,...t)}return n}();!function(t=$t()){const e=Ut(t=A(t),Re);e.isInitialized()?e.getImmediate():function(t,e={}){const n=Ut(t,Re);if(n.isInitialized()){const t=n.getImmediate();if(S(e,n.getOptions()))return t;throw Fe.create("already-initialized")}n.initialize({options:e})}(t)}(Tc);const Ic={0:"–ò–Ω–Ω–æ–≤–∞—Ç–∏–∫–∞",1:"–ë–∏–∑–Ω–µ—Å-–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞"};const Cc={0:"A",1:"B",2:"C",3:"D"},Ac=""+new URL("maintheme-2b0916e7.mp3",import.meta.url).href,Dc=""+new URL("button-634d74f8.mp3",import.meta.url).href,kc=""+new URL("correct-217f32e3.mp3",import.meta.url).href,Nc=""+new URL("incorrect-14ca96c6.mp3",import.meta.url).href,xc=""+new URL("win-07b6916b.mp3",import.meta.url).href,Lc=new Audio(Ac);Lc.volume=.2,Lc.load();const Mc=new Audio(Dc);Mc.volume=.8,Mc.load();const Oc=new Audio(kc);Oc.volume=.6,Oc.load();const Rc=new Audio(Nc);Rc.volume=.8,Rc.load();const Pc=new Audio(xc);Pc.volume=.8,Pc.load();const Vc={main:Lc,button:Mc,correct:Oc,incorrect:Rc,win:Pc,soundBtnCheck:function(){document.querySelectorAll("#soundBtn").forEach((t=>t.addEventListener("click",(()=>{window.appState.muted=!window.appState.muted,window.appState.muted?(Lc.pause(),t.classList.add("muted")):(Lc.play(),t.classList.remove("muted"))}))))}};function Fc(t){const e=document.querySelector(".main"),n=document.querySelector("#downloadDoc"),i=document.querySelector("#startgame");!function(t){const e=Object.keys(window.appState.counts).reduce(((t,e)=>window.appState.counts[t]>window.appState.counts[e]?t:e));let n,i;0===t?(n={A:"–¢—ã –æ–±–æ–∂–∞–µ—à—å –∫–æ–º—Ñ–æ—Ä—Ç, –Ω–æ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –≥–∏–±–∫–æ—Å—Ç–∏!",B:"–¢—ã –ø—Ä–∞–≥–º–∞—Ç–∏–∫ ‚Äì –º–æ–∂–µ—à—å –±—ã—Ç—å –∫—Ä—É—Ç—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –≤ –∏–Ω–Ω–æ–≤–∞—Ç–∏–∫–µ!",C:"–¢—ã –ø—Ä–∏—Ä–æ–∂–¥–µ–Ω–Ω—ã–π –Ω–æ–≤–∞—Ç–æ—Ä! üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±—É–¥—É—â–µ–µ!",D:"–¢—ã —Å—Ç—Ä–∞—Ç–µ–≥, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω—ã–º–∏!"},i="–ò–Ω–Ω–æ–≤–∞—Ç–∏–∫–∞"):(n={A:"–¢—ã –ª—é–±–∏—à—å –∫–æ–º—Ñ–æ—Ä—Ç –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –≥–∏–±–∫–æ—Å—Ç–∏!",B:"–¢—ã –∞–Ω–∞–ª–∏—Ç–∏–∫ –ø–æ –Ω–∞—Ç—É—Ä–µ, –∞ –∑–Ω–∞—á–∏—Ç, —Ç–µ–±–µ —Ç–æ—á–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç —ç—Ç–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å!",C:"–¢—ã –∏–Ω–Ω–æ–≤–∞—Ç–æ—Ä! –í –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–µ —Ç–∞–∫–∏–µ –ª—é–¥–∏ —Å–æ–∑–¥–∞—é—Ç –±—É–¥—É—â–µ–µ.",D:"–¢—ã –ø—Ä–∏—Ä–æ–∂–¥–µ–Ω–Ω—ã–π —Å—Ç—Ä–∞—Ç–µ–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–µ—Ü ‚Äì –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ —Ç–≤–æ–π –ø—É—Ç—å!"},i="–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞"),document.getElementById("quiz-result").textContent=n[e],document.getElementById("quiz-disclaimer").textContent=i,async function(t,e,n){try{const i=Ic[t]||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è";await _c(function(t,e,...n){if(t=A(t),ja("collection","path",e),t instanceof Wa){const i=Zn.fromString(e,...n);return $a(i),new Ja(t,null,i)}{if(!(t instanceof Ya||t instanceof Ja))throw new Nn(kn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Zn.fromString(e,...n));return $a(i),new Ja(t.firestore,null,i)}}(Sc,"quiz_answers"),{userId:`${(new Date).getTime()}-${Math.random().toString(36).substring(2,10)}`,category:i,answers:e,maxCategory:n,timestamp:new Date})}catch(i){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤: ",i)}}(window.appState.player,window.appState.counts,e)}(t),n.addEventListener("click",(e=>{e.preventDefault();const n=document.createElement("a");0===t?(n.href="./docs/innovation.pdf",n.download="innovation.pdf"):(n.href="./docs/business.pdf",n.download="business.pdf"),n.click(),window.appState.muted||Vc.button.play()}),{once:!0}),i.addEventListener("click",(t=>{t.preventDefault(),e.innerHTML='\n  <div class="start">\n    <h2 class="main-header start__header">\n      –¢–≤–æ–µ –±—É–¥—É—â–µ–µ –≤ IT –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å\n    </h2>\n    <div class="start__desc">\n      <p class="start__text">\n        üî• –ü–æ—Å—Ç—É–ø–∞–π –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å <span class="nowrap">–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ –∏ –ò–Ω–Ω–æ–≤–∞—Ç–∏–∫–∞</span> –≤ –î–æ–Ω–ì–£ <span\n          class="nowrap">–∏ –æ—Ç–∫—Ä–æ–π –¥–ª—è</span> —Å–µ–±—è –º–∏—Ä —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π!\n      </p>\n    </div>\n    <button class="btn green-btn start__btn" id="start-btn">\n      –ù–∞—á–∞—Ç—å –∏–≥—Ä—É\n    </button>\n    <p class="typewriter"><span class="typed-text"></span><span class="cursor blink">&nbsp;</span></p>\n  </div>\n  <div class="bottom">\n    <div class="social-bar">\n      <a href="https://t.me/voity_v_IT_2025" class="social-link" target="_blank">\n        <img src="./img/tg.png" alt="">\n      </a>\n      <a href="https://vk.com/business_inform_donnu" class="social-link" target="_blank">\n        <img src="./img/vk.png" alt="">\n      </a>\n    </div>\n    <div class="bottom__desc2">\n      <div class="bottom__address">\n        <p>–ö–∞—Ñ–µ–¥—Ä–∞ –ë–∏–∑–Ω–µ—Å-–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏</p>\n        <p>–≥. –î–æ–Ω–µ—Ü–∫, —É–ª. –ß–µ–ª—é—Å–∫–∏–Ω—Ü–µ–≤, 198–∞</p>\n        <a href="tel:+7(949)3178568">–¢–µ–ª.: +7 (949) 317 85 68</a>\n        <br>\n        <a href="mailto:info@donnu.ru" target="_blank">e-mail: kf.bi.ufin@donnu.ru</a>\n        <br>\n        <a class="bottom__link" href="https://donnu.ru/fin/bi" target="_blank">www.donnu.ru/fin/bi</a>\n      </div>\n      <div class="bottom__logo">\n        <a href="https://donnu.ru/fin/bi" target="_blank">\n          Bi\n        </a>\n        <p class="bottom__logo-desc">Business Informatics</p>\n      </div>\n    </div>\n  </div>\n',h("finalback","startback"),window.appState.muted||Vc.button.play(),qc()}),{once:!0})}function Uc(){const t=document.querySelector(".main");4===window.appState.currentScreen?(h("gameplayback","finalback"),t.innerHTML='\n  <div class="final">\n    <img class="final__img" src="./img/final-earth.png" alt="">\n    <h2 class="main-header final__header">‚ú® –ü–æ–¥—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h2>\n    <div class="final__desc">\n      <p id="quiz-result">–¢–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –∫–æ–º—Ñ–æ—Ä—Ç –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –±–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –≥–∏–±–∫–æ—Å—Ç–∏!</p>\n      <p>–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ <span id="quiz-disclaimer"></span>! üìöüöÄ</p>\n    </div>\n    <div class="final__btns">\n      <button id="downloadDoc" class="btn green-btn final__btn">–°–∫–∞—á–∞—Ç—å –ø–∞–º—è—Ç–∫—É</button>\n      <button id="startgame" class="btn orange-btn final__btn">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤&nbsp;–Ω–∞—á–∞–ª–æ</button>\n    </div>\n  </div>\n',Fc(window.appState.player),window.appState.muted||Vc.win.play()):(t.innerHTML=function(t,e){const n=l[t][e],i=l[t].length;return`\n    <div class="game ${n.correctclass}">\n      <h2 class="main-header game__header">\n        ${n.title}\n\n        <button class="game__sound" id="soundBtn"></button>\n        <div class="game__progressbar">\n        \n        <svg class="progressbar" width="307" height="54" viewBox="0 0 307 54" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect x="301.344" y="9.44531" width="35.6191" height="294.611" transform="rotate(90 301.344 9.44531)" fill="white"/>\n        <rect x="301.344" y="9.44531" width="35.6191" height="294.611" transform="rotate(90 301.344 9.44531)" fill="white"/>\n        <rect x="301.344" y="9.44531" width="35.6191" height="294.611" transform="rotate(90 301.344 9.44531)" fill="white"/>\n        ${function(){let t=[];const e=window.appState.currentScreen;for(let n=0;n<12;n++)switch(n){case 0:n<3*e?t.push('<path class="quad colored" d="M32.0063 13.4141H11.0063V41.4141H32.0063V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M32.0063 13.4141H11.0063V41.4141H32.0063V13.4141Z" fill="#E6E5E8"/>');break;case 1:n<3*e?t.push('<path class="quad colored" d="M56.2695 13.4141H35.2695V41.4141H56.2695V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M56.2695 13.4141H35.2695V41.4141H56.2695V13.4141Z" fill="#E6E5E8"/>');break;case 2:n<3*e?t.push('<path class="quad colored" d="M80.3275 13.4141H59.3275V41.4141H80.3275V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M80.3275 13.4141H59.3275V41.4141H80.3275V13.4141Z" fill="#E6E5E8"/>');break;case 3:n<3*e?t.push('<path class="quad colored" d="M104.386 13.4141H83.3858V41.4141H104.386V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M104.386 13.4141H83.3858V41.4141H104.386V13.4141Z" fill="#E6E5E8"/>');break;case 4:n<3*e?t.push('<path class="quad colored" d="M128.444 13.4141H107.444V41.4141H128.444V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M128.444 13.4141H107.444V41.4141H128.444V13.4141Z" fill="#E6E5E8"/>');break;case 5:n<3*e?t.push('<path class="quad colored" d="M152.502 13.4141H131.502V41.4141H152.502V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M152.502 13.4141H131.502V41.4141H152.502V13.4141Z" fill="#E6E5E8"/>');break;case 6:n<3*e?t.push('<path class="quad colored" d="M176.561 13.4141H155.561V41.4141H176.561V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M176.561 13.4141H155.561V41.4141H176.561V13.4141Z" fill="#E6E5E8"/>');break;case 7:n<3*e?t.push('<path class="quad colored" d="M200.618 13.4141H179.618V41.4141H200.618V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M200.618 13.4141H179.618V41.4141H200.618V13.4141Z" fill="#E6E5E8"/>');break;case 8:n<3*e?t.push('<path class="quad colored" d="M224.677 13.4141H203.677V41.4141H224.677V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M224.677 13.4141H203.677V41.4141H224.677V13.4141Z" fill="#E6E5E8"/>');break;case 9:n<3*e?t.push('<path class="quad colored" d="M248.735 13.4141H227.735V41.4141H248.735V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M248.735 13.4141H227.735V41.4141H248.735V13.4141Z" fill="#E6E5E8"/>');break;case 10:n<3*e?t.push('<path class="quad colored" d="M272.793 13.4141H251.793V41.4141H272.793V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M272.793 13.4141H251.793V41.4141H272.793V13.4141Z" fill="#E6E5E8"/>');break;case 11:n<3*e?t.push('<path class="quad colored" d="M296.852 13.4141H275.852V41.4141H296.852V13.4141Z" fill="#E6E5E8"/>'):t.push('<path class="quad" d="M296.852 13.4141H275.852V41.4141H296.852V13.4141Z" fill="#E6E5E8"/>')}return t.join("")}()}\n        <path d="M301.344 45.0645H6.93945V50.0645H301.344V45.0645Z" fill="#06D0A0"/>\n        <path d="M6.93945 9.44531H1.93945V45.0645H6.93945V9.44531Z" fill="#06D0A0"/>\n        <path d="M306.344 9.44531H301.344V45.0645H306.344V9.44531Z" fill="#06D0A0"/>\n        <path d="M301.344 4.44531H6.93945V9.44531H301.344V4.44531Z" fill="#06D0A0"/>\n        </svg>\n        \n        </div>\n      </h2>\n      \n      <div class="game__block">\n        <img class="game__img" \n        src="${n.imgurl}" \n        alt="–ü–∞—Ü–∏–µ–Ω—Ç –≤ —Å–ª–æ–∂–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏">\n\n        <div class="game__question question">\n          <div class="question__text">\n\n            <div class="question__top">\n              <p class="question__desc">${n.description}</p>\n              <p class="question__number">\n                ${e+1} / ${i}\n              </p>\n            </div>\n\n            <div class="question__que">\n              ${n.question}\n            </div>\n          </div>\n\n\n\t\t\t\t\t${n.answers.map(((t,e)=>`\n          <ul class="question__vars">\n\t\t\t\t\t\t\t<li>  \n\t\t\t\t\t\t\t\t<button class="answer" id="${e}">\n\t\t\t\t\t\t\t\t\t<div class="answer__digit-border">\n\t\t\t\t\t\t\t\t\t\t<span class="answer__digit">${e+1}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t${t}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</li>\n           `)).join("")}\n          </ul>\n        </div>\n      </div>\n    </div>\n  `}(window.appState.player,window.appState.currentScreen),Vc.soundBtnCheck(),document.querySelectorAll(".answer").forEach((t=>t.addEventListener("click",Bc,{once:!0}))))}function Bc(t){const e=document.querySelector(".popupErrorContent"),n=document.querySelector(".PopupSuccessContent");t.preventDefault();const i=t.target.closest(".answer");document.querySelectorAll(".answer").forEach((t=>{t.classList.remove("correct"),t.classList.remove("incorrect")})),function(t){const e=Cc[t];e&&window.appState.counts[e]++}(i.id),i.id==l[window.appState.player][window.appState.currentScreen].correct?(i.classList.add("correct"),document.querySelectorAll(".answer").forEach((t=>{t.setAttribute("disabled",!0)})),window.appState.muted||Vc.incorrect.play(),jc(),n.innerHTML=l[window.appState.player][window.appState.currentScreen].popup.correct,MicroModal.show("modal-success"),window.appState.currentScreen+=1):(i.classList.add("correct"),window.appState.muted||Vc.correct.play(),jc(),e.innerHTML=l[window.appState.player][window.appState.currentScreen].popup.incorrect,MicroModal.show("modal-error"),window.appState.currentScreen+=1)}function jc(){const t=document.querySelectorAll(".quad");let e=0;for(let n=3*window.appState.currentScreen;n<3*window.appState.currentScreen+3;n++)e+=300,setTimeout((()=>{t[n].classList.add("colored")}),e)}function qc(){window.appState={player:0,currentScreen:0,muted:!1,counts:{A:0,B:0,C:0,D:0}},function(){document.querySelector("body").innerHTML+='\n  <div class="modal micromodal-slide" id="modal-error" aria-hidden="true">\n\t\t<div class="modal__overlay" tabindex="-1">\n\t\t\t<div class="modal__container">\n\t\t\t\t<div class="modal__head">\n\t\t\t\t\t<div class="modal__close error"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal__content">\t\t\t\t\t\n\t\t\t\t\t<div class="popupErrorContent modal__message"></div>\n\t\t\t\t\t<button class="modal__button btn green-btn error">–ü–æ–Ω—è—Ç–Ω–æ</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="modal micromodal-slide" id="modal-success" aria-hidden="true">\n\t\t<div class="modal__overlay" tabindex="-1">\n\t\t\t<div class="modal__container">\n\t\t\t\t<div class="modal__head">\n\t\t\t\t\t<div class="modal__close success"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal__content">\n\t\t\t\t\t<div class="PopupSuccessContent modal__message"></div>\n\t\t\t\t\t<button class="modal__button btn green-btn success">–ü–æ–Ω—è—Ç–Ω–æ</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n  ';const t=document.querySelectorAll(".success"),e=document.querySelectorAll(".error");function n(){c.close("modal-success"),window.appState.muted||Vc.button.play(),Uc()}function i(){c.close("modal-error"),window.appState.muted||Vc.button.play(),Uc()}t.forEach((t=>t.addEventListener("click",n))),e.forEach((t=>t.addEventListener("click",i)))}(),function(){const t=document.querySelector(".typed-text"),e=document.querySelector(".cursor"),n=["00101101110001001","typedText.textContent = 0","Web Development","Business","Innovations"];let i=0,r=0;const s=()=>{r>0?(e.classList.remove("blink"),t.textContent=n[i].slice(0,r-1),r--,setTimeout(s,80)):(e.classList.add("blink"),i++,i>n.length-1&&(i=0),setTimeout(o,1e3))},o=()=>{r<=n[i].length-1?(e.classList.remove("blink"),t.textContent+=n[i].charAt(r),r++,setTimeout(o,120)):(e.classList.add("blink"),setTimeout(s,1e3))};o()}(),document.querySelector("#start-btn").addEventListener("click",$c,{once:!0})}function $c(t){t.preventDefault(),window.appState.muted||(Vc.button.play(),Vc.main.play()),document.querySelector(".main").innerHTML='\n  <div class="player">\n    <button class="player__sound" id="soundBtn"></button>\n    <h2 class="main-header player__header">\n      –ö–∞–∫–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—ã –ø–æ–¥—Ö–æ–¥–∏—à—å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?\n    </h2>\n    <div class="player__desc">\n      –í–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è —Å –≤—ã–±–æ—Ä–æ–º.\n    </div>\n    <div class="player__choose">\n      <button id="player1" class="btn-playerchoose player__card card player1">\n        <img class="player__back" src="./img/player_1.png" alt="–ò–Ω–Ω–æ–≤–∞—Ç–∏–∫–∞">\n      </button>\n      <button id="player2" class="btn-playerchoose player__card card player2">\n        <img class="player__back" src="./img/player_2.png" alt="–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞">\n      </button>\n    </div>\n  </div>\n',Vc.soundBtnCheck(),h("startback","gameplayback");const e=document.querySelector("#player1"),n=document.querySelector("#player2");e.addEventListener("click",Hc,{once:!0}),n.addEventListener("click",Hc,{once:!0})}function Hc(t){window.appState.muted||Vc.button.play();const e=t.target.closest(".btn-playerchoose");"player1"===e.id&&(window.appState.player=0),"player2"===e.id&&(window.appState.player=1),Uc()}c.init(),window.document.addEventListener("keydown",(t=>{"Escape"==t.code&&(t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation())})),function(){let e=0;const n={};t.forEach((i=>{const r=new Image;r.src=i,r.onload=()=>{n[i]=r,e++,e===t.length&&qc()},r.onerror=()=>{!function(t,e){const n=document.querySelector("#start-btn"),i=document.querySelector(".typed-text");n.disabled=!0,i.innerHTML="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ =(",console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${e}`)}(0,i)}}))}();
